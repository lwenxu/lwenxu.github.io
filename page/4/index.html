<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://example.com/page/4/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 5.2.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-DesignPattern/设计模式-观察者模式" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/06/04/DesignPattern/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F/" class="article-date">
  <time datetime="2019-06-04T15:30:28.000Z" itemprop="datePublished">2019-06-04</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/">设计模式</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/06/04/DesignPattern/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F/">设计模式 - 观察者模式</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="设计模式-观察者模式"><a href="#设计模式-观察者模式" class="headerlink" title="设计模式 - 观察者模式"></a>设计模式 - 观察者模式</h1><hr>
<blockquote>
<p>本文转载自<a target="_blank" rel="noopener" href="https://mrdear.cn/">屈定’s Blog</a></p>
</blockquote>
<h2 id="观察者模式"><a href="#观察者模式" class="headerlink" title="观察者模式"></a>观察者模式</h2><p>观察者模式描述的是一种一对多的关系,这里的一可能是某个状态发生变化,也可能是某一个事件产生.举个例子,针对订单付款,这一事件产生后可能需要经过很多个处理步骤,比如积分,入库,消费排行榜之类的操作,这些操作之间并没有任何关联性甚至可以并行处理,那么就可以理解为订单付款与处理步骤之间的一对多关系.<br>还有一个特点就是单向依赖,处理步骤对于订单付款是单向依赖的,比如有订单付款,才能有处理步骤.但是反之就不依赖,订单付款对于有没有处理步骤是不关心的,这一点在下文实战中会详细讲解.</p>
<h3 id="观察者模式结构"><a href="#观察者模式结构" class="headerlink" title="观察者模式结构"></a>观察者模式结构</h3><p>观察者模式主要结构如下:<br><img src="http://imgblog.mrdear.cn/1524063218.png?imageMogr2/thumbnail/!100p" alt="img"></p>
<ul>
<li>Subject: 负责事件产生后通知到具体观察者的角色,所谓的通知实际上是循环调用其所持有的观察者接口</li>
<li>Observer: 负责对事件的处理,该接口可以很好的做到任务分离,每一个不同的任务都是其一个实现子类,互相不关心对方,很好的描述了业务上的关系.</li>
</ul>
<p>那么本质什么?用一个<code>Subject</code>来聚合所有的<code>Observer</code>,那么调用者只需要关心对应的<code>Subject</code>就可以.<br>为什么可以这样? 因为<code>Observer</code>之间没有任何关系,只是单纯的做自己要做的事情,也并不需要返回值之类的东西.</p>
<h2 id="观察者模式的实战案例"><a href="#观察者模式的实战案例" class="headerlink" title="观察者模式的实战案例"></a>观察者模式的实战案例</h2><p>如笔者一开始描述的需求,再订单付款完成之后执行一些处理步骤,具体如下:</p>
<ol>
<li>如果是虚拟产品订单,那么就发放虚拟产品</li>
<li>如果是会员订单那么就开通会员</li>
<li>根据付款金额增加积分</li>
<li>如果有消费排行榜活动则更新用户金额.</li>
<li>…..</li>
</ol>
<p>这种是开发中很常见的付款后一些对应的操作需求,并且随着活动之类的增加后续还很容易增加其他的处理步骤需求,对于观察者模式其符合以下两点特征:</p>
<ol>
<li>订单付款完成这一事件对应对个处理步骤,典型一对多关系</li>
<li>处理步骤之间并无关联性,每一个都是独立的处理</li>
</ol>
<h3 id="观察者模式设计"><a href="#观察者模式设计" class="headerlink" title="观察者模式设计"></a>观察者模式设计</h3><p>上述用观察模式可以设计出如下结构:<br><img src="http://imgblog.mrdear.cn/1524065151.png?imageMogr2/thumbnail/!120p" alt="img"></p>
<p><strong>OrderPaidHandlerObserver</strong><br>其是观察者需要实现的接口,主要功能是判断是不是自己可以处理,可以处理的话就处理,其子类各司其职,比如<code>IntegralOrderService</code>是处理积分相关的观察者,<code>VipOrderService</code>则是处理会员相关的Service.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">public interface OrderPaidHandlerObserver &#123;</span><br><span class="line">  &#x2F;**</span><br><span class="line">   * 是否支持处理该消息</span><br><span class="line">   * @param paidMsg 消息体</span><br><span class="line">   * @return true 支持</span><br><span class="line">   *&#x2F;</span><br><span class="line">  boolean supportHandler(OrderPaidMsgDTO paidMsg);</span><br><span class="line">  &#x2F;**</span><br><span class="line">   * 处理方法</span><br><span class="line">   * @param paidMsg 消息体</span><br><span class="line">   *&#x2F;</span><br><span class="line">  void handler(OrderPaidMsgDTO paidMsg);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>OrderPaidHandlerSubject</strong><br>其是负责通知所有观察者的接口,实现了该接口就有了通知观察者的义务.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">public interface OrderPaidHandlerSubject &#123;</span><br><span class="line">  &#x2F;**</span><br><span class="line">   * 提醒所有的观察者</span><br><span class="line">   * @param paidMsg 付款消息</span><br><span class="line">   *&#x2F;</span><br><span class="line">  void notifyObservers(OrderPaidMsgDTO paidMsg);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>OrderCompositeService</strong><br>其是<code>OrderPaidHandlerSubject</code>的实现类,主要实现负责通知所有观察者的逻辑,所谓的通知本质上就是调用自己所持有的观察者对象,那么当订单付款事件产生后<code>OrderCompositeService</code>只需要调用下<code>notifyObservers()</code>方法就可以完成通知,完成所有的处理步骤.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">public class OrderCompositeService implements OrderPaidHandlerSubject &#123;</span><br><span class="line"></span><br><span class="line">  private List&lt;OrderPaidHandlerObserver&gt; observers;</span><br><span class="line"></span><br><span class="line">  @Override</span><br><span class="line">  public void notifyObservers(OrderPaidMsgDTO paidMsg) &#123;</span><br><span class="line">    &#x2F;&#x2F; 所谓的通知本质上就是调用对应观察者的方法</span><br><span class="line">    for (OrderPaidHandlerObserver observer : observers) &#123;</span><br><span class="line">      try &#123;</span><br><span class="line">        if (observer.supportHandler(paidMsg)) &#123;</span><br><span class="line">          observer.handler(paidMsg);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125; catch (Exception e) &#123;</span><br><span class="line">        log.error(&quot;OrderPaidHandlerObserver fail&quot;, e);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="使用Spring管理观察者"><a href="#使用Spring管理观察者" class="headerlink" title="使用Spring管理观察者"></a>使用Spring管理观察者</h3><p><code>OrderCompositeService</code>作为Subject来说,其持有了全部的<code>Observer</code>,那么如果利用IOC把<code>Observer</code>全部注入进该类中,那么当下次新增加一个<code>Observer</code>实现类时就不需要改这边的任何代码,完完全全的解耦.<br>思路是利用IOC管理所有的观察者,当Spring容器启动完毕后获取所有的观察者,添加到对应的<code>observers</code>集合中,具体做法就是让<code>OrderCompositeService</code>实现<code>ApplicationListener&lt;ContextRefreshedEvent&gt;</code>接口,Spring在启动完毕后会发出通知,在该接口中利用<code>BeanFactoryUtils</code>初始化所需要的观察者集合.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;**</span><br><span class="line">   * 容器初始化完毕后所执行的事件</span><br><span class="line">   *&#x2F;</span><br><span class="line">  @Override</span><br><span class="line">  public void onApplicationEvent(ContextRefreshedEvent event) &#123;</span><br><span class="line">    initPaidObserver(event);</span><br><span class="line">  &#125;</span><br><span class="line">  &#x2F;**</span><br><span class="line">   * 初始化订单付款所要执行的事件</span><br><span class="line">   *&#x2F;</span><br><span class="line">  private void initPaidObserver(ContextRefreshedEvent event) &#123;</span><br><span class="line">    &#x2F;&#x2F; 从Spring容器中取出所有的观察者</span><br><span class="line">    Map&lt;String, OrderPaidHandlerObserver&gt; matchingBeans &#x3D;</span><br><span class="line">        BeanFactoryUtils.beansOfTypeIncludingAncestors(event.getApplicationContext(), OrderPaidHandlerObserver.class, true, false);</span><br><span class="line">    &#x2F;&#x2F; 实例化观察者集合</span><br><span class="line">    this.observers &#x3D; Collections.unmodifiableList(Lists.newArrayList(matchingBeans.values()));</span><br><span class="line">    if (this.observers.size() &lt;&#x3D; 0) &#123;</span><br><span class="line">      throw new IllegalStateException(&quot;OrderPaidHandlerObserver not found&quot;);</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">      log.info(&quot;initPaidObserver finish, observer is &#123;&#125;&quot;, matchingBeans.keySet());</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>



<p>这样做的好处就是把观察者的实例化与Subject解耦,对于观察者只需要知道自己一旦实现了观察者接口,那么就一定会有相应的Subject通知自己就足够了.</p>
<h2 id="观察者的-“感兴趣”-粒度"><a href="#观察者的-“感兴趣”-粒度" class="headerlink" title="观察者的 “感兴趣” 粒度"></a>观察者的 “感兴趣” 粒度</h2><p>在观察者模式中<code>Observer</code>会像<code>Subject</code>注册自己,那么当Subject对应多个事件时怎么处理呢?<br><strong>1.Subject管理多组Observer</strong><br>在<code>Subject</code>中存放着多组<code>Observer</code>,当一个事件触发时只会通知其中一组.这样做法个人感觉是比较合理的.缺点是管理不方便,对于<code>Subject</code>来说要管理多组,对应的removeOvserver或者addObserver就会比较麻烦了,此时可以依赖IOC等工具完成这个过程.<br><strong>2.Observer多角色</strong><br>这种方案下,对于一个<code>Subject</code>他管理的只有一组<code>Observer</code>,但是<code>Observer</code>本身要承担多个责任,并且对自己不感兴趣的责任要留空方法处理.<code>Observer</code>可能只对一件事情感兴趣却不得不实现一堆空方法,不符合最少知道原则.Java的<code>AWT</code>就是这种设计.<br><strong>3.使用弱类型参数</strong><br>JDK自带的<code>Observer</code>就是类似的形式,其使用<code>Object</code>作为观察者参数,当接收到消息时需要用<code>instance</code>判断是否是自己感兴趣的事件,然后才执行逻辑,当事件很少的话这种方式是比较合适的,事件多的话则对一堆事件要分开处理,依然很麻烦.Eclipse的SWT是这种设计.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2019/06/04/DesignPattern/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F/" data-id="cmblme37a002olppvdn0511lm" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E8%A7%82%E5%AF%9F%E8%80%85/" rel="tag">设计模式,观察者</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Java SE/Fliter链" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/06/04/Java%20SE/Fliter%E9%93%BE/" class="article-date">
  <time datetime="2019-06-04T10:49:28.000Z" itemprop="datePublished">2019-06-04</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Java/">-Java</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/06/04/Java%20SE/Fliter%E9%93%BE/">Filter 链</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p> 在写JavaWeb的时候我们经常会遇到一个概念就是 Filter 链，比如对于路由拦截，以及文件目录拦截都有一个Filter 和Filter链，那么他们底层具体到底是怎么工作的呢？</p>
<p>听到Filter 链这个名词我们觉得一个 Filter 链应该可以进行链式调用，来判断我们的条件是否成立，也就是类似于下面的规则:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">filterChain.doFilter(pattern).doFilter(pattern)</span><br></pre></td></tr></table></figure>

<p>这样想是没错，那每次就需要返回下一个 Filter 这么想是没错，可是我们怎么知道下一次 Filter 是谁呢？</p>
<p>链表！ 对滴，这时候链表就起作用了，我们直接采用了 LinkedList 就能把这些 Filter 串起来。然后根据当前的 Filter 找出下一个 Filter 。</p>
<p>实际上在某些框架之中不是这么实现了的，但是基本的思路已经非常对了。例如这里是 SpringSecurity 中的 Filter 的简单实现：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.LinkedList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test1</span> </span>&#123;</span><br><span class="line">    <span class="class"><span class="keyword">interface</span> <span class="title">Filter</span></span>&#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doFilter</span><span class="params">(FilterChain filterChain)</span></span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">MyFilter</span> <span class="keyword">implements</span> <span class="title">Filter</span> </span>&#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doFilter</span><span class="params">(FilterChain filterChain)</span> </span>&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;filter invoke&quot;</span>);</span><br><span class="line">            filterChain.doFilter();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">interface</span> <span class="title">FilterChain</span></span>&#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doFilter</span><span class="params">()</span></span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">MyFilterChain</span> <span class="keyword">implements</span> <span class="title">FilterChain</span></span>&#123;</span><br><span class="line">        List&lt;Filter&gt; filters;</span><br><span class="line">        <span class="keyword">int</span> pos = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        MyFilterChain(List&lt;Filter&gt; filters) &#123;</span><br><span class="line">            <span class="keyword">this</span>.filters = filters;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doFilter</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">if</span> (pos == filters.size()) &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;end&quot;</span>);</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            Filter filter = filters.get(pos++);</span><br><span class="line">            filter.doFilter(<span class="keyword">this</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        LinkedList&lt;Filter&gt; list = <span class="keyword">new</span> LinkedList&lt;&gt;();</span><br><span class="line">        list.add(<span class="keyword">new</span> MyFilter());</span><br><span class="line">        list.add(<span class="keyword">new</span> MyFilter());</span><br><span class="line">        list.add(<span class="keyword">new</span> MyFilter());</span><br><span class="line">        <span class="keyword">new</span> MyFilterChain(list).doFilter();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>




      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2019/06/04/Java%20SE/Fliter%E9%93%BE/" data-id="cmblme37p003tlppvcihu5jr0" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Filter/" rel="tag">Filter</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Java SE/Java 新特性 - Stream" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/05/11/Java%20SE/Java%20%E6%96%B0%E7%89%B9%E6%80%A7%20-%20Stream/" class="article-date">
  <time datetime="2019-05-11T17:49:28.000Z" itemprop="datePublished">2019-05-11</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Java/">Java</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/05/11/Java%20SE/Java%20%E6%96%B0%E7%89%B9%E6%80%A7%20-%20Stream/">Java 新特性之 Stream</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Stream"><a href="#Stream" class="headerlink" title="Stream"></a>Stream</h2><p>使用这个方法创建一个 Stream 对象。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> ArrayList&lt;&gt;().stream()</span><br></pre></td></tr></table></figure>

<h2 id="Filter"><a href="#Filter" class="headerlink" title="Filter"></a>Filter</h2><p>过滤器，里面传递一个函数，这个函数的返回结果如果为 true 则保留这个元素，否则的话丢弃这个元素。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">stringCollection</span><br><span class="line">        .stream()</span><br><span class="line">        .filter((s) -&gt; s.startsWith(<span class="string">&quot;a&quot;</span>))</span><br><span class="line">        .forEach(System.out::println);</span><br></pre></td></tr></table></figure>



<h2 id="Foreach"><a href="#Foreach" class="headerlink" title="Foreach"></a>Foreach</h2><p>遍历，消费。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">stringCollection</span><br><span class="line">        .stream()</span><br><span class="line">        .filter((s) -&gt; s.startsWith(<span class="string">&quot;a&quot;</span>))</span><br><span class="line">        .forEach(System.out::println);</span><br></pre></td></tr></table></figure>



<h2 id="Map"><a href="#Map" class="headerlink" title="Map"></a>Map</h2><p>这个功能也是遍历，但是他是有返回值的，而上面的 Foreach 是没有返回值的，仅仅是单纯的消费。而且 Foreach 不能够链式调用，因为没有返回值，但是 Map 没问题。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">stringCollection</span><br><span class="line">        .stream()</span><br><span class="line">        .map(String::toUpperCase)</span><br><span class="line">        .sorted(Comparator.reverseOrder())</span><br><span class="line">        .forEach(System.out::println);</span><br></pre></td></tr></table></figure>

<h2 id="Sorted"><a href="#Sorted" class="headerlink" title="Sorted"></a>Sorted</h2><p>这个方法是用来排序的，里面传递的函数就是一个比较器，也可以不传递参数，使用默认的就好。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">stringCollection</span><br><span class="line">        .stream()</span><br><span class="line">        .sorted(( x, y)-&gt; y.length()-x.length())</span><br><span class="line">        .filter((s) -&gt; s.startsWith(<span class="string">&quot;a&quot;</span>))</span><br><span class="line">        .forEach(System.out::println);</span><br></pre></td></tr></table></figure>

<h2 id="Match"><a href="#Match" class="headerlink" title="Match"></a>Match</h2><p>根据在给定的 stream 对象中是否含有指定内容返回 true 或者 false 。</p>
<p>具体的有：</p>
<ul>
<li>allMatch</li>
<li>anyMatch</li>
<li>noneMatch</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">boolean anyStartsWithA &#x3D; stringCollection</span><br><span class="line">        .stream()</span><br><span class="line">        .anyMatch((s) -&gt; s.startsWith(&quot;a&quot;));</span><br><span class="line"></span><br><span class="line">boolean allStartsWithA &#x3D; stringCollection</span><br><span class="line">        .stream()</span><br><span class="line">        .allMatch((s) -&gt; s.startsWith(&quot;a&quot;));</span><br><span class="line"></span><br><span class="line">boolean noneStartsWithZ &#x3D; stringCollection</span><br><span class="line">        .stream()</span><br><span class="line">        .noneMatch((s) -&gt; s.startsWith(&quot;z&quot;));</span><br></pre></td></tr></table></figure>

<h2 id="count"><a href="#count" class="headerlink" title="count"></a>count</h2><p>计算集合中的元素的个数。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">long</span> startsWithB = stringCollection</span><br><span class="line">        .stream()</span><br><span class="line">        .filter((s) -&gt; s.startsWith(<span class="string">&quot;b&quot;</span>))</span><br><span class="line">        .count();</span><br></pre></td></tr></table></figure>

<h2 id="reduce"><a href="#reduce" class="headerlink" title="reduce"></a>reduce</h2><p>这个函数就是类似于斐波那契数列，每次传递的参数是上一次的结果和从集合中取出的新元素。第一次默认取出了第一个元素和第二个元素。</p>
<p>简单的例子就是，第一次取出 0,1 第二次取出 第一次reduce的结果作为第一个参数，取出 2 作为第二个参数，以此类推。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Optional&lt;String&gt; reduced =</span><br><span class="line">        stringCollection</span><br><span class="line">                .stream()</span><br><span class="line">                .sorted()</span><br><span class="line">                .reduce((s1, s2) -&gt; s1 + <span class="string">&quot;#&quot;</span> + s2);</span><br></pre></td></tr></table></figure>

<h2 id="parallelStream"><a href="#parallelStream" class="headerlink" title="parallelStream"></a>parallelStream</h2><p>并行的 steam 流，可以进行并行处理，这样会效率更高。在使用stream.foreach时这个遍历没有线程安全问题，但是使用parallelStream就会有线程安全问题，所有在parallelStream里面使用的外部变量，比如集合一定要使用线程安全集合，不然就会引发多线程安全问题。如果说需要保证安全性需要使用 reduce 和 collect，不过这个用起来超级麻烦！！！</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">long</span> count = values.parallelStream().sorted().count();</span><br></pre></td></tr></table></figure>



<h2 id="IntStream-range-a-b"><a href="#IntStream-range-a-b" class="headerlink" title="IntStream.range(a,b)"></a>IntStream.range(a,b)</h2><p>可以直接生成 从 a 到 b 的整数这里还是遵循编程语言的大多数约定，那就是含头不含尾。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">IntStream.range(<span class="number">0</span>, <span class="number">10</span>)</span><br><span class="line">    .forEach(System.out::println);</span><br></pre></td></tr></table></figure>

<p>输出的结果是</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">0</span><br><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td></tr></table></figure>

<h2 id="new-Random-ints"><a href="#new-Random-ints" class="headerlink" title="new Random().ints()"></a>new Random().ints()</h2><p>获取一系列的随机值，这个接口出来的数据是连续不断的，所以需要用limit来限制一下。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> Random().ints().limit(<span class="number">10</span>).forEach(System.out::println);</span><br></pre></td></tr></table></figure>

<h2 id="Supplier"><a href="#Supplier" class="headerlink" title="Supplier"></a>Supplier</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Supplier&lt;String&gt; stringSupplier=String::<span class="keyword">new</span>;</span><br><span class="line">stringSupplier.get();</span><br></pre></td></tr></table></figure>

<p>该接口就一个抽象方法get方法,不用传入任何参数,直接返回一个泛型T的实例.就如同无参构造一样</p>
<h2 id="Consumer"><a href="#Consumer" class="headerlink" title="Consumer"></a>Consumer</h2><h3 id="1-accept方法"><a href="#1-accept方法" class="headerlink" title="1.    accept方法"></a>1.    accept方法</h3><p>​        该函数式接口的唯一的抽象方法,接收一个参数,没有返回值.</p>
<h3 id="2-andThen方法"><a href="#2-andThen方法" class="headerlink" title="2.    andThen方法"></a>2.    andThen方法</h3><p>​        在执行完调用者方法后再执行传入参数的方法.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConsumerTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Consumer&lt;Integer&gt; consumer = (x) -&gt; &#123;</span><br><span class="line">            <span class="keyword">int</span> num = x * <span class="number">2</span>;</span><br><span class="line">            System.out.println(num);</span><br><span class="line">        &#125;;</span><br><span class="line">        Consumer&lt;Integer&gt; consumer1 = (x) -&gt; &#123;</span><br><span class="line">            <span class="keyword">int</span> num = x * <span class="number">3</span>;</span><br><span class="line">            System.out.println(num);</span><br><span class="line">        &#125;;</span><br><span class="line">        consumer.andThen(consumer1).accept(<span class="number">10</span>);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>先执行了 consumer.accept(10) 然后执行了 consumer1.accept(10)</p>
<h2 id="ifPresent"><a href="#ifPresent" class="headerlink" title="ifPresent"></a>ifPresent</h2><p>针对一个optional 如果有值的话就执行否则不执行。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">IntStream</span><br><span class="line">    .builder()</span><br><span class="line">    .add(<span class="number">1</span>)</span><br><span class="line">    .add(<span class="number">3</span>)</span><br><span class="line">    .add(<span class="number">5</span>)</span><br><span class="line">    .add(<span class="number">7</span>)</span><br><span class="line">    .add(<span class="number">11</span>)</span><br><span class="line">    .build()</span><br><span class="line">    .average()</span><br><span class="line">    .ifPresent(System.out::println);</span><br></pre></td></tr></table></figure>

<p>average 执行结果就是一个 optional</p>
<h2 id="Collect"><a href="#Collect" class="headerlink" title="Collect"></a>Collect</h2><p>他有两种调用方式</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"> &lt;R&gt; <span class="function">R <span class="title">collect</span><span class="params">(Supplier&lt;R&gt; supplier,</span></span></span><br><span class="line"><span class="function"><span class="params">                 BiConsumer&lt;R, ? <span class="keyword">super</span> T&gt; accumulator,</span></span></span><br><span class="line"><span class="function"><span class="params">                 BiConsumer&lt;R, R&gt; combiner)</span></span>;</span><br><span class="line"></span><br><span class="line">&lt;R, A&gt; <span class="function">R <span class="title">collect</span><span class="params">(Collector&lt;? <span class="keyword">super</span> T, A, R&gt; collector)</span></span>;</span><br></pre></td></tr></table></figure>

<p>下面主要介绍一下这两种方式的使用方法：</p>
<h3 id="1-函数"><a href="#1-函数" class="headerlink" title="1. 函数"></a>1. 函数</h3><p>第一种调用方式的接口如下</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;R&gt; <span class="function">R <span class="title">collect</span><span class="params">(Supplier&lt;R&gt; supplier,</span></span></span><br><span class="line"><span class="function"><span class="params">                BiConsumer&lt;R, ? <span class="keyword">super</span> T&gt; accumulator,</span></span></span><br><span class="line"><span class="function"><span class="params">                BiConsumer&lt;R, R&gt; combiner)</span></span>;</span><br></pre></td></tr></table></figure>

<ul>
<li>supplier 这个参数就是提供一个容器，可以看到最后 collect 操作的结果是一个 R 类型变量，而 supplier 接口最后需要返回的也是一个 R 类型的变量，所以说这里返回的是收集元素的容器。</li>
<li>accumulator 参数，看到这个函数的定义是传入一个 R 容器，后面则是 T 类型的元素，需要将这个 T 放到 R 容器中，即这一步是用来将元素添加到容器中的操作。</li>
<li>conbiner 这个参数是两个容器，即当出现多个容器的时候容器如何进行聚合。</li>
</ul>
<p>一个简单的例子：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">String concat = stringStream.collect(StringBuilder::<span class="keyword">new</span>, StringBuilder::append,StringBuilder::append).toString();</span><br><span class="line"><span class="comment">//等价于上面,这样看起来应该更加清晰</span></span><br><span class="line">String concat = stringStream.collect(() -&gt; <span class="keyword">new</span> StringBuilder(),(l, x) -&gt; l.append(x), (r1, r2) -&gt; r1.append(r2)).toString();</span><br></pre></td></tr></table></figure>

<h3 id="2-Collector-接口"><a href="#2-Collector-接口" class="headerlink" title="2. Collector 接口"></a>2. Collector 接口</h3><p>第二种方案是更高级的用法采用了 Collector 接口：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;R, A&gt; <span class="function">R <span class="title">collect</span><span class="params">(Collector&lt;? <span class="keyword">super</span> T, A, R&gt; collector)</span></span>;</span><br></pre></td></tr></table></figure>

<p>可以看到他返回的还是一个 R 类型的变量，也就是容器。</p>
<p><code>Collector</code>接口是使得<code>collect</code>操作强大的终极武器,对于绝大部分操作可以分解为旗下主要步骤,<strong>提供初始容器-&gt;加入元素到容器-&gt;并发下多容器聚合-&gt;对聚合后结果进行操作</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">CollectorImpl</span>&lt;<span class="title">T</span>, <span class="title">A</span>, <span class="title">R</span>&gt; <span class="keyword">implements</span> <span class="title">Collector</span>&lt;<span class="title">T</span>, <span class="title">A</span>, <span class="title">R</span>&gt; </span>&#123;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">final</span> Supplier&lt;A&gt; supplier;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">final</span> BiConsumer&lt;A, T&gt; accumulator;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">final</span> BinaryOperator&lt;A&gt; combiner;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">final</span> Function&lt;A, R&gt; finisher;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">final</span> Set&lt;Characteristics&gt; characteristics;</span><br><span class="line"></span><br><span class="line">        CollectorImpl(Supplier&lt;A&gt; supplier,</span><br><span class="line">                      BiConsumer&lt;A, T&gt; accumulator,</span><br><span class="line">                      BinaryOperator&lt;A&gt; combiner,</span><br><span class="line">                      Function&lt;A,R&gt; finisher,</span><br><span class="line">                      Set&lt;Characteristics&gt; characteristics) &#123;</span><br><span class="line">            <span class="keyword">this</span>.supplier = supplier;</span><br><span class="line">            <span class="keyword">this</span>.accumulator = accumulator;</span><br><span class="line">            <span class="keyword">this</span>.combiner = combiner;</span><br><span class="line">            <span class="keyword">this</span>.finisher = finisher;</span><br><span class="line">            <span class="keyword">this</span>.characteristics = characteristics;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        CollectorImpl(Supplier&lt;A&gt; supplier,</span><br><span class="line">                      BiConsumer&lt;A, T&gt; accumulator,</span><br><span class="line">                      BinaryOperator&lt;A&gt; combiner,</span><br><span class="line">                      Set&lt;Characteristics&gt; characteristics) &#123;</span><br><span class="line">            <span class="keyword">this</span>(supplier, accumulator, combiner, castingIdentity(), characteristics);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> BiConsumer&lt;A, T&gt; <span class="title">accumulator</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> accumulator;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> Supplier&lt;A&gt; <span class="title">supplier</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> supplier;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> BinaryOperator&lt;A&gt; <span class="title">combiner</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> combiner;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> Function&lt;A, R&gt; <span class="title">finisher</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> finisher;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> Set&lt;Characteristics&gt; <span class="title">characteristics</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> characteristics;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>可以看到我们可以直接 <code>new CollectorImpl</code> 然后将这些函数传入，另外还有一种简单的方式就是 使用 <code>Collector.of()</code>依然可以直接传入函数。和 <code>new CollectorImpl</code> 是等价的。</p>
<h3 id="3-工具函数"><a href="#3-工具函数" class="headerlink" title="3. 工具函数"></a>3. 工具函数</h3><h4 id="1-toList"><a href="#1-toList" class="headerlink" title="1. toList()"></a>1. toList()</h4><p>容器: <code>ArrayList::new</code><br>加入容器操作: <code>List::add</code><br>多容器合并: <code>left.addAll(right); return left;</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt;</span><br><span class="line"> Collector&lt;T, ?, List&lt;T&gt;&gt; toList() &#123;</span><br><span class="line">     <span class="keyword">return</span> <span class="keyword">new</span> CollectorImpl&lt;&gt;((Supplier&lt;List&lt;T&gt;&gt;) ArrayList::<span class="keyword">new</span>, List::add,</span><br><span class="line">                                (left, right) -&gt; &#123; left.addAll(right); <span class="keyword">return</span> left; &#125;,</span><br><span class="line">                                CH_ID);</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<h4 id="2-joining"><a href="#2-joining" class="headerlink" title="2.joining()"></a>2.joining()</h4><p>容器: <code>StringBuilder::new</code><br>加入容器操作: <code>StringBuilder::append</code><br>多容器合并: <code>r1.append(r2); return r1;</code><br>聚合后的结果操作: <code>StringBuilder::toString</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> Collector&lt;CharSequence, ?, String&gt; joining() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> CollectorImpl&lt;CharSequence, StringBuilder, String&gt;(</span><br><span class="line">            StringBuilder::<span class="keyword">new</span>, StringBuilder::append,</span><br><span class="line">            (r1, r2) -&gt; &#123; r1.append(r2); <span class="keyword">return</span> r1; &#125;,</span><br><span class="line">            StringBuilder::toString, CH_NOID);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="3-groupingBy"><a href="#3-groupingBy" class="headerlink" title="3.groupingBy()"></a>3.groupingBy()</h4><p><code>roupingBy</code>是<code>toMap</code>的一种高级方式,弥补了<code>toMap</code>对值无法提供多元化的收集操作,比如对于返回<code>Map&lt;T,List&lt;E&gt;&gt;</code>这样的形式<code>toMap</code>就不是那么顺手,那么<code>groupingBy</code>的重点就是对Key和Value值的处理封装.分析如下代码,其中<code>classifier</code>是对key值的处理,<code>mapFactory</code>则是指定Map的容器具体类型,<code>downstream</code>为对Value的收集操作.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> &lt;T, K, D, A, M extends Map&lt;K, D&gt;&gt;</span><br><span class="line"> Collector&lt;T, ?, M&gt; groupingBy(Function&lt;? <span class="keyword">super</span> T, ? extends K&gt; classifier,</span><br><span class="line">                               Supplier&lt;M&gt; mapFactory,</span><br><span class="line">                               Collector&lt;? <span class="keyword">super</span> T, A, D&gt; downstream) &#123;</span><br><span class="line">    .......</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<p>一个简单的例子</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//原生形式</span></span><br><span class="line">   Lists.&lt;Person&gt;newArrayList().stream()</span><br><span class="line">        .collect(() -&gt; <span class="keyword">new</span> HashMap&lt;Integer,List&lt;Person&gt;&gt;(),</span><br><span class="line">            (h, x) -&gt; &#123;</span><br><span class="line">              List&lt;Person&gt; value = h.getOrDefault(x.getType(), Lists.newArrayList());</span><br><span class="line">              value.add(x);</span><br><span class="line">              h.put(x.getType(), value);</span><br><span class="line">            &#125;,</span><br><span class="line">            HashMap::putAll</span><br><span class="line">        );</span><br><span class="line"><span class="comment">//groupBy形式</span></span><br><span class="line">Lists.&lt;Person&gt;newArrayList().stream()</span><br><span class="line">        .collect(Collectors.groupingBy(Person::getType, HashMap::<span class="keyword">new</span>, Collectors.toList()));</span><br><span class="line"><span class="comment">//因为对值有了操作,因此我可以更加灵活的对值进行转换</span></span><br><span class="line">Lists.&lt;Person&gt;newArrayList().stream()</span><br><span class="line">        .collect(Collectors.groupingBy(Person::getType, HashMap::<span class="keyword">new</span>, Collectors.mapping(Person::getName,Collectors.toSet())));</span><br><span class="line"><span class="comment">// 还有一种比较简单的使用方式 只需要传递一个参数按照key来划分</span></span><br><span class="line">Map&lt;Integer, List&lt;Person&gt;&gt; personsByAge = persons</span><br><span class="line">            .stream()</span><br><span class="line">    .collect(Collectors.groupingBy(p -&gt; p.age));</span><br></pre></td></tr></table></figure>



<h4 id="4-reducing"><a href="#4-reducing" class="headerlink" title="4.reducing()"></a>4.reducing()</h4><p><code>reducing</code>是针对单个值的收集,其返回结果不是集合家族的类型,而是单一的实体类T<br>容器: <code>boxSupplier(identity)</code>,这里包裹用的是一个长度为1的Object[]数组,至于原因自然是不可变类型的锅<br>加入容器操作: <code>a[0] = op.apply(a[0], t)</code><br>多容器合并: <code>a[0] = op.apply(a[0], b[0]); return a;</code><br>聚合后的结果操作: 结果自然是Object[0]所包裹的数据<code>a -&gt; a[0]</code><br>优化操作状态字段: <code>CH_NOID</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; Collector&lt;T, ?, T&gt;</span><br><span class="line">  reducing(T identity, BinaryOperator&lt;T&gt; op) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> CollectorImpl&lt;&gt;(</span><br><span class="line">              boxSupplier(identity),</span><br><span class="line">              (a, t) -&gt; &#123; a[<span class="number">0</span>] = op.apply(a[<span class="number">0</span>], t); &#125;,</span><br><span class="line">              (a, b) -&gt; &#123; a[<span class="number">0</span>] = op.apply(a[<span class="number">0</span>], b[<span class="number">0</span>]); <span class="keyword">return</span> a; &#125;,</span><br><span class="line">              a -&gt; a[<span class="number">0</span>],</span><br><span class="line">              CH_NOID);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<p>简单来说这个地方做的事情和 reduce 是一样的，第一个 id 传入的就是 reduce 的初始值，只是他把它包装成一个 长度为1的数组了。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//原生操作</span></span><br><span class="line"><span class="keyword">final</span> Integer[] integers = Lists.newArrayList(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>)</span><br><span class="line">        .stream()</span><br><span class="line">        .collect(() -&gt; <span class="keyword">new</span> Integer[]&#123;<span class="number">0</span>&#125;, (a, x) -&gt; a[<span class="number">0</span>] += x, (a1, a2) -&gt; a1[<span class="number">0</span>] += a2[<span class="number">0</span>]);</span><br><span class="line"><span class="comment">//reducing操作</span></span><br><span class="line"><span class="keyword">final</span> Integer collect = Lists.newArrayList(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>)</span><br><span class="line">        .stream()</span><br><span class="line">        .collect(Collectors.reducing(<span class="number">0</span>, Integer::sum));    </span><br><span class="line"><span class="comment">//当然Stream也提供了reduce操作</span></span><br><span class="line"><span class="keyword">final</span> Integer collect = Lists.newArrayList(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>)</span><br><span class="line">        .stream().reduce(<span class="number">0</span>, Integer::sum)</span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2019/05/11/Java%20SE/Java%20%E6%96%B0%E7%89%B9%E6%80%A7%20-%20Stream/" data-id="cmblme37q003vlppv12xzg8mh" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java8/" rel="tag">Java8</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Java SE/Java 新特性 - Time" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/05/10/Java%20SE/Java%20%E6%96%B0%E7%89%B9%E6%80%A7%20-%20Time/" class="article-date">
  <time datetime="2019-05-10T10:49:28.000Z" itemprop="datePublished">2019-05-10</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Java/">-Java</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/05/10/Java%20SE/Java%20%E6%96%B0%E7%89%B9%E6%80%A7%20-%20Time/">Java 新特性之 Time</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="日期类-LocalDate"><a href="#日期类-LocalDate" class="headerlink" title="日期类 LocalDate"></a>日期类 LocalDate</h2><p>能够简单的获取当天的日期，并且可以方便的对日期进行加减。</p>
<p>他是通过静态方法或者 from/of 等方法创建对象的。</p>
<p>这个类不存储时区，所以他没有时区的概念，如果需要时区的话需要使用 <code>ZonedDateTime</code></p>
<p>这个类只能进行日期的相关操作，没有具体的时间。</p>
<p>下面介绍常用的几个方法</p>
<h3 id="atTime"><a href="#atTime" class="headerlink" title="atTime"></a>atTime</h3><p>生成一个带有时间的日期，返回结果是 <code>LocalDateTime</code> 所以很明显这个就是带有时间的日期类。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">LocalDateTime time = LocalDate.now().atTime(<span class="number">12</span>, <span class="number">3</span>, <span class="number">22</span>,<span class="number">232</span>);</span><br><span class="line">System.out.println(time); <span class="comment">//2019-05-10T12:03:22.000000232</span></span><br></pre></td></tr></table></figure>

<h3 id="compareTo"><a href="#compareTo" class="headerlink" title="compareTo()"></a>compareTo()</h3><p>比较两个时间返回的值是 int ，大于 0 则是比较者大，否则是被比较者大，为0相等。</p>
<h3 id="format"><a href="#format" class="headerlink" title="format()"></a>format()</h3><p>格式化时间，需要传递一个时间的 formatter 类型为 <code>[DateTimeFormatter]</code> </p>
<h3 id="parse"><a href="#parse" class="headerlink" title="parse()"></a>parse()</h3><p>同上第一个参数是解析的字符串，第二个就是传入formatter</p>
<h3 id="plus-minus"><a href="#plus-minus" class="headerlink" title="plus/minus"></a>plus/minus</h3><p>对日期进行加减，第一个参数传入的是 int 第二个就是单位，单位使用 <code>ChronoUnit</code> 枚举类型</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LocalDate1</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        LocalDate today = LocalDate.now();</span><br><span class="line">        <span class="comment">// 添加时间</span></span><br><span class="line">        LocalDate i22day = today.plusDays(<span class="number">22</span>);</span><br><span class="line">        LocalDate tomorrow = today.plus(<span class="number">1</span>, ChronoUnit.DAYS);</span><br><span class="line">        <span class="comment">// 减去时间</span></span><br><span class="line">        LocalDate s22day = today.minus(<span class="number">22</span>, ChronoUnit.DAYS);</span><br><span class="line">        LocalDate yesterday = tomorrow.minusDays(<span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">        System.out.println(today);</span><br><span class="line">        System.out.println(tomorrow);</span><br><span class="line">        System.out.println(yesterday);</span><br><span class="line">        System.out.println(i22day);</span><br><span class="line">        System.out.println(s22day);</span><br><span class="line"></span><br><span class="line">        LocalDate independenceDay = LocalDate.of(<span class="number">2014</span>, Month.JULY, <span class="number">4</span>);</span><br><span class="line">        DayOfWeek dayOfWeek = independenceDay.getDayOfWeek();</span><br><span class="line">        System.out.println(dayOfWeek);    <span class="comment">// FRIDAY</span></span><br><span class="line"></span><br><span class="line">        DateTimeFormatter germanFormatter =</span><br><span class="line">                DateTimeFormatter</span><br><span class="line">                        .ofLocalizedDate(FormatStyle.MEDIUM)</span><br><span class="line">                        .withLocale(Locale.GERMAN);</span><br><span class="line"></span><br><span class="line">        DateTimeFormatter dateTimeFormatter = DateTimeFormatter.ofPattern(<span class="string">&quot;yyyy/mm/dd hh:mm:ss&quot;</span>);</span><br><span class="line">        LocalDate xmas = LocalDate.parse(<span class="string">&quot;24.12.2014&quot;</span>, germanFormatter);</span><br><span class="line">        <span class="comment">// System.out.println(LocalDate.parse(&quot;2014/02/01 12:03:22&quot;, dateTimeFormatter));</span></span><br><span class="line">        System.out.println(xmas);   <span class="comment">// 2014-12-24</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        System.out.println(LocalDate.now().atStartOfDay());</span><br><span class="line"></span><br><span class="line">        LocalDateTime time = LocalDate.now().atTime(<span class="number">12</span>, <span class="number">3</span>, <span class="number">22</span>,<span class="number">232</span>);</span><br><span class="line">        System.out.println(time);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>



<h2 id="时间-LocalDateTime"><a href="#时间-LocalDateTime" class="headerlink" title="时间 LocalDateTime"></a>时间 LocalDateTime</h2><p>这个和上面类似是一个时间类，不仅仅有日期还是时间。</p>
<h3 id="atZone"><a href="#atZone" class="headerlink" title="atZone"></a>atZone</h3><p>产生带有时区日期</p>
<h3 id="format-1"><a href="#format-1" class="headerlink" title="format"></a>format</h3><p>格式化时间</p>
<h3 id="of"><a href="#of" class="headerlink" title="of"></a>of</h3><p>从一个时间创建对象 <code>of(int year, int month, int dayOfMonth, int hour, int minute, int second)</code></p>
<h3 id="parse-1"><a href="#parse-1" class="headerlink" title="parse"></a>parse</h3><p>解析时间 <code>**parse**([CharSequence]text, [DateTimeFormatter]</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LocalDateTime1</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        LocalDateTime sylvester = LocalDateTime.of(<span class="number">2014</span>, Month.DECEMBER, <span class="number">31</span>, <span class="number">23</span>, <span class="number">59</span>, <span class="number">59</span>);</span><br><span class="line"></span><br><span class="line">        DayOfWeek dayOfWeek = sylvester.getDayOfWeek();</span><br><span class="line">        System.out.println(dayOfWeek);      <span class="comment">// WEDNESDAY</span></span><br><span class="line"></span><br><span class="line">        Month month = sylvester.getMonth();</span><br><span class="line">        System.out.println(month);          <span class="comment">// DECEMBER</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">long</span> minuteOfDay = sylvester.getLong(ChronoField.MINUTE_OF_DAY);</span><br><span class="line">        System.out.println(minuteOfDay);    <span class="comment">// 1439</span></span><br><span class="line"></span><br><span class="line">        Instant instant = sylvester</span><br><span class="line">                .atZone(ZoneId.systemDefault())</span><br><span class="line">                .toInstant();</span><br><span class="line"></span><br><span class="line">        Date legacyDate = Date.from(instant);</span><br><span class="line">        System.out.println(legacyDate);     <span class="comment">// Wed Dec 31 23:59:59 CET 2014</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        DateTimeFormatter formatter =</span><br><span class="line">                DateTimeFormatter</span><br><span class="line">                        .ofPattern(<span class="string">&quot;MMM dd, yyyy - HH:mm&quot;</span>);</span><br><span class="line"></span><br><span class="line">        LocalDateTime parsed = LocalDateTime.parse(<span class="string">&quot;Nov 03, 2014 - 07:13&quot;</span>, formatter);</span><br><span class="line">        String string = parsed.format(formatter);</span><br><span class="line">        System.out.println(string);     <span class="comment">// Nov 03, 2014 - 07:13</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="本地时间-LocalTime"><a href="#本地时间-LocalTime" class="headerlink" title="本地时间 LocalTime"></a>本地时间 LocalTime</h2><p>这个类是上面的LocaDateTime中的 Time 部分，也就是只具有时间没有日期。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">public class LocalDate1 &#123;</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        LocalDate today &#x3D; LocalDate.now();</span><br><span class="line">        &#x2F;&#x2F; 添加时间</span><br><span class="line">        LocalDate i22day &#x3D; today.plusDays(22);</span><br><span class="line">        LocalDate tomorrow &#x3D; today.plus(1, ChronoUnit.DAYS);</span><br><span class="line">        &#x2F;&#x2F; 减去时间</span><br><span class="line">        LocalDate s22day &#x3D; today.minus(22, ChronoUnit.DAYS);</span><br><span class="line">        LocalDate yesterday &#x3D; tomorrow.minusDays(2);</span><br><span class="line"></span><br><span class="line">        System.out.println(today);</span><br><span class="line">        System.out.println(tomorrow);</span><br><span class="line">        System.out.println(yesterday);</span><br><span class="line">        System.out.println(i22day);</span><br><span class="line">        System.out.println(s22day);</span><br><span class="line"></span><br><span class="line">        LocalDate independenceDay &#x3D; LocalDate.of(2014, Month.JULY, 4);</span><br><span class="line">        DayOfWeek dayOfWeek &#x3D; independenceDay.getDayOfWeek();</span><br><span class="line">        System.out.println(dayOfWeek);    &#x2F;&#x2F; FRIDAY</span><br><span class="line"></span><br><span class="line">        DateTimeFormatter germanFormatter &#x3D;</span><br><span class="line">                DateTimeFormatter</span><br><span class="line">                        .ofLocalizedDate(FormatStyle.MEDIUM)</span><br><span class="line">                        .withLocale(Locale.GERMAN);</span><br><span class="line"></span><br><span class="line">        DateTimeFormatter dateTimeFormatter &#x3D; DateTimeFormatter.ofPattern(&quot;yyyy&#x2F;mm&#x2F;dd hh:mm:ss&quot;);</span><br><span class="line">        LocalDate xmas &#x3D; LocalDate.parse(&quot;24.12.2014&quot;, germanFormatter);</span><br><span class="line">        &#x2F;&#x2F; System.out.println(LocalDate.parse(&quot;2014&#x2F;02&#x2F;01 12:03:22&quot;, dateTimeFormatter));</span><br><span class="line">        System.out.println(xmas);   &#x2F;&#x2F; 2014-12-24</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        System.out.println(LocalDate.now().atStartOfDay());</span><br><span class="line"></span><br><span class="line">        LocalDateTime time &#x3D; LocalDate.now().atTime(12, 3, 22,232);</span><br><span class="line">        System.out.println(time);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>



<h2 id="时钟-Clock"><a href="#时钟-Clock" class="headerlink" title="时钟 Clock"></a>时钟 Clock</h2><p>这个类可以获取当前的时间戳</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Clock1</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Clock millis = Clock.tickMillis(ZoneOffset.UTC);</span><br><span class="line">        Clock seconds = Clock.tickSeconds(ZoneOffset.UTC);</span><br><span class="line">        Clock minutes = Clock.tickMinutes(ZoneOffset.UTC);</span><br><span class="line">        <span class="comment">// 精确到毫秒的时间戳</span></span><br><span class="line">        System.out.println(millis.millis());</span><br><span class="line">        <span class="comment">// 精确到秒的时间戳</span></span><br><span class="line">        System.out.println(seconds.millis());</span><br><span class="line">        <span class="comment">// 精确到分钟的时间戳</span></span><br><span class="line">        System.out.println(minutes.millis());</span><br><span class="line">        <span class="comment">// 精确到毫秒的时间</span></span><br><span class="line">        System.out.println(millis.instant());</span><br><span class="line">        <span class="comment">// 精确到秒的时间</span></span><br><span class="line">        System.out.println(seconds.instant());</span><br><span class="line">        <span class="comment">// 精确到分钟的时间</span></span><br><span class="line">        System.out.println(minutes.instant());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>上面的输出结果是：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1557567339397</span><br><span class="line">1557567339000</span><br><span class="line">1557567300000</span><br><span class="line">2019-05-11T09:35:39.397Z</span><br><span class="line">2019-05-11T09:35:39Z</span><br><span class="line">2019-05-11T09:35:00Z</span><br></pre></td></tr></table></figure>

<h2 id="Map初始化小技巧"><a href="#Map初始化小技巧" class="headerlink" title="Map初始化小技巧"></a>Map初始化小技巧</h2><p>再看Clock类中的 ZoneId 接口的时候发现了这个接口中使用了一个Map，然对Map做了初始化。一般初始化必须使用 put 放数据，这里采用了 ofEntries 来初始化多组数据。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> Map&lt;String, String&gt; SHORT_IDS = Map.ofEntries(</span><br><span class="line">        entry(<span class="string">&quot;ACT&quot;</span>, <span class="string">&quot;Australia/Darwin&quot;</span>),</span><br><span class="line">        entry(<span class="string">&quot;AET&quot;</span>, <span class="string">&quot;Australia/Sydney&quot;</span>),</span><br><span class="line">        entry(<span class="string">&quot;AGT&quot;</span>, <span class="string">&quot;America/Argentina/Buenos_Aires&quot;</span>),</span><br><span class="line">        entry(<span class="string">&quot;ART&quot;</span>, <span class="string">&quot;Africa/Cairo&quot;</span>),</span><br><span class="line">        entry(<span class="string">&quot;AST&quot;</span>, <span class="string">&quot;America/Anchorage&quot;</span>),</span><br><span class="line">        entry(<span class="string">&quot;BET&quot;</span>, <span class="string">&quot;America/Sao_Paulo&quot;</span>),</span><br><span class="line">        entry(<span class="string">&quot;BST&quot;</span>, <span class="string">&quot;Asia/Dhaka&quot;</span>),</span><br><span class="line">        entry(<span class="string">&quot;CAT&quot;</span>, <span class="string">&quot;Africa/Harare&quot;</span>),</span><br><span class="line">        entry(<span class="string">&quot;CNT&quot;</span>, <span class="string">&quot;America/St_Johns&quot;</span>),</span><br><span class="line">        entry(<span class="string">&quot;CST&quot;</span>, <span class="string">&quot;America/Chicago&quot;</span>),</span><br><span class="line">        entry(<span class="string">&quot;CTT&quot;</span>, <span class="string">&quot;Asia/Shanghai&quot;</span>),</span><br><span class="line">        entry(<span class="string">&quot;EAT&quot;</span>, <span class="string">&quot;Africa/Addis_Ababa&quot;</span>),</span><br><span class="line">        entry(<span class="string">&quot;ECT&quot;</span>, <span class="string">&quot;Europe/Paris&quot;</span>),</span><br><span class="line">        entry(<span class="string">&quot;IET&quot;</span>, <span class="string">&quot;America/Indiana/Indianapolis&quot;</span>),</span><br><span class="line">        entry(<span class="string">&quot;IST&quot;</span>, <span class="string">&quot;Asia/Kolkata&quot;</span>),</span><br><span class="line">        entry(<span class="string">&quot;JST&quot;</span>, <span class="string">&quot;Asia/Tokyo&quot;</span>),</span><br><span class="line">        entry(<span class="string">&quot;MIT&quot;</span>, <span class="string">&quot;Pacific/Apia&quot;</span>),</span><br><span class="line">        entry(<span class="string">&quot;NET&quot;</span>, <span class="string">&quot;Asia/Yerevan&quot;</span>),</span><br><span class="line">        entry(<span class="string">&quot;NST&quot;</span>, <span class="string">&quot;Pacific/Auckland&quot;</span>),</span><br><span class="line">        entry(<span class="string">&quot;PLT&quot;</span>, <span class="string">&quot;Asia/Karachi&quot;</span>),</span><br><span class="line">        entry(<span class="string">&quot;PNT&quot;</span>, <span class="string">&quot;America/Phoenix&quot;</span>),</span><br><span class="line">        entry(<span class="string">&quot;PRT&quot;</span>, <span class="string">&quot;America/Puerto_Rico&quot;</span>),</span><br><span class="line">        entry(<span class="string">&quot;PST&quot;</span>, <span class="string">&quot;America/Los_Angeles&quot;</span>),</span><br><span class="line">        entry(<span class="string">&quot;SST&quot;</span>, <span class="string">&quot;Pacific/Guadalcanal&quot;</span>),</span><br><span class="line">        entry(<span class="string">&quot;VST&quot;</span>, <span class="string">&quot;Asia/Ho_Chi_Minh&quot;</span>),</span><br><span class="line">        entry(<span class="string">&quot;EST&quot;</span>, <span class="string">&quot;-05:00&quot;</span>),</span><br><span class="line">        entry(<span class="string">&quot;MST&quot;</span>, <span class="string">&quot;-07:00&quot;</span>),</span><br><span class="line">        entry(<span class="string">&quot;HST&quot;</span>, <span class="string">&quot;-10:00&quot;</span>)</span><br><span class="line">    );</span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2019/05/10/Java%20SE/Java%20%E6%96%B0%E7%89%B9%E6%80%A7%20-%20Time/" data-id="cmblme37r0040lppv8w63c5j1" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java8/" rel="tag">Java8</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Live/扬帆起航" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/04/14/Live/%E6%89%AC%E5%B8%86%E8%B5%B7%E8%88%AA/" class="article-date">
  <time datetime="2019-04-14T09:33:55.000Z" itemprop="datePublished">2019-04-14</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E7%94%9F%E6%B4%BB%E6%84%9F%E6%82%9F/">生活感悟</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/04/14/Live/%E6%89%AC%E5%B8%86%E8%B5%B7%E8%88%AA/">扬帆起航</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="扬帆起航"><a href="#扬帆起航" class="headerlink" title="扬帆起航"></a>扬帆起航</h1><p>其实很早就想写这篇文章，只是一直不知道从何说起。或者说，没能腾出一片完整的时间，给自己的大学生活写一个完整的回忆录。其实细细想来，这段时光更像是平静的水面，偶然也有湍急之处泛着白色的浪花。</p>
<h2 id="开始"><a href="#开始" class="headerlink" title="开始"></a>开始</h2><p>​    和大多数人一样，以萌新的身份来到大学，看着即将成为自己学长学姐的那群人，一时不知道从哪里开始了解这个陌生而又神秘的校园。好，美好的大学生活就先从图书馆开始。良好的习惯是成功一半，也得要先熟悉熟悉自己以后学习的地方。</p>
<p>​    摸索了挺久，才找到了计算机学科的阅览室。怎么说呢，被一大堆《Photoshop 从入门到精通》、《21 天精通 C 语言》、《JAVA语言精粹》吸引，幻想着自己真的能21天完成菜鸟到码神的逆袭。</p>
<p>​    好吧… 想多了，不过，我还是爱上了这个地方。接下来的一学期，就是扎根图书馆，进行名词式学习了。之所以称之为名词式学习，是真的觉得自己的学习，没有正确的方式。一股脑的恨不得把没听过的东西都去学一遍，没见过的语言都想办法 <strong>『21天精通』</strong> 。于是，我成了一个彻底的 “宅男” ，只不过宅的是图书馆。</p>
<p>​    所以还是想说，要在正确的路上做正确的事。这时候，一个好的引导者就显得尤为重要。他会带着你，踩尽量少的坑，走弯路更少的路。这个人，可以是你的老师，你的学长学姐，偶然发现的你们班里的大神。记得，找最适合自己的人，走最适合自己的路。</p>
<h2 id="LAMP-光"><a href="#LAMP-光" class="headerlink" title="LAMP - 光"></a>LAMP - 光</h2><p>​    庆幸的是，我的野路子并没有持续太久，我找到了方向——加入实验室。这就是我想说的另一点了，加入实验室。任何时候都不要说 “等我在多学点，再怎么怎么样”。要知道，实验室本身就是，可以更好的更快的学习新东西并快速实践的地方。</p>
<p>​    我在大一下学期就进入了网络中心，也是在这里下定了决心一门心思的去做开发，不再一味的折腾 Linux 。（PS：如果不是想要看内核源码或者做系统运维，就不用花大量时间折腾 Linux 软件了，时间上比较不划算）</p>
<p>​    加入了正规军，也接受了更正规的训练。我更加清楚，作为一名计算机专业的学生，我以后要走的是一条什么样的路，要成为一个怎么样的人。我们的团队叫做 “LMAP” ，取自我们开发使用的技术栈，同时也有 “光” 的含义！在这里，我度过了我的整个大学时光。</p>
<p>​    已经说不清楚，那些曾经帮助过我的老师和学长们，是我所尊敬的师长，还是陪我一起成长的家人了。我们一起撸过凌晨两点的小院烧烤，也一起看过凌晨四点钟的西大，我想在这里特别感谢帮助过我的 『杨建丰』老师，以及 『金刚』 学长， 『文科』 学长！</p>
<h2 id="嘉木"><a href="#嘉木" class="headerlink" title="嘉木"></a>嘉木</h2><p>​    我想说一件，我大学里很骄傲的事。也许没什么人听过，但确确实实是我大学里很珍贵的财富。事情源于大二上学期，在一个学长的组织下我们准备建设西北大学自己的 PT 站点。奈何出师未捷身先死，本来组建的团队还没开始开发就解散了。我很感谢20岁的我，可以那么勇敢得，去一个人做我现在可能有顾虑的事。</p>
<p>​    项目基于开源的 “NexusPHP 项目” 。其实关于这个项目的案例很多，但是资料很少，很多高校采用了这套代码，并且进行了魔改，但是遗憾的是并没有开源。怀着雄心壮志，我一个人上路了。我想把它做好，然后开源出去，哪怕困难重重（事实证明遇到的困恼是重重重重重）。</p>
<p>​    项目从九月中旬一直到十二月份，出了三个测试版本。这段时间基本除了上课时间我都是坐在电脑前面赶项目。由于 NexusPHP 是 2006 年开发的，当时的开发团队采用了比较原始的前后端夹杂的方式，代码基本没有可维护性而言，大部分还是 function block 基本不存在 OO 设计，HTML 和 CSS 基本全部嵌在 PHP 中，一个文件 1000 - 3000 行，甚至还有 15000 行的。那段时间真的是日常崩溃 ，不知道因为改代码电脑死机多少次，又熬了多少次夜。经常为了一个问题和功能，想到睡不着觉，有时候做梦都在写代码，想要看着自己的成果，早点问世。</p>
<p>​    十二月份，第一个上线的版本终于确定了，第一周的注册量只有 500 。不过，当时上线的时间确实也是选择的不对，那时候快要期末考试，大家一门心思复习，没什么时间关注别的东西。第二年又对界面进行了重构，基本是全新的 UI。之后，我们也想了很多办法去提高用户量。我们组织了一些宣传活动有推出了嘉木的纪念文化衫，还想了很多办法降低用户使用站点的门槛，但是最终用户活跃度始终稳定在几百人，并没有达到预期。</p>
<p>​    最终，站点只运行了一年，由于多方面的问题被关停。这次的失败也让我明白，一个产品的孵化并不简简单单的依靠技术，产品的运营和团队管理是上层建筑。没有好的运营和管理，再好的产品也没有办法发挥价值。</p>
<p>​    另外比较庆幸的是，这次之后，我确实发现自己的技术得到了质的飞跃——毕竟 10 多万行代码的编码经验和调试上的经验比看书来的要真切的多，也算是真切的体会到 “纸上得来终觉浅，绝知此事要躬行”  。</p>
<h2 id="迷茫"><a href="#迷茫" class="headerlink" title="迷茫"></a>迷茫</h2><p>​    其实在嘉木比较稳定运行期间，就没有太多额外的开发工作了。那段时间除了处理实验室老师交代的任务之外，就全身心的投入到 <code>ThinkPHP</code> 和 <code>OneThink</code> 的源码。其实源码看了会很容易忘掉，所以不仅仅是看，看完以后我都会凭着印象和思路再敲一遍，实现框架和系统的核心部分。</p>
<p>​    我在阅读读 <code>OneThink</code> 源码时就明显感觉到了自己和巨佬们之间的差距。虽然说 <code>OneThink</code> 源码不是那种 “Bible 级别” ，但官方对 TP 的运用确实称的上炉火纯青。一边阅读，一边发现原来<code>ThinkPHP</code> 可以这么写，原来那么多特性是可以这么使用的，原来一个简单的模块需要这么多代码保证高扩展性，健壮性，和稳定性。</p>
<p>​    大二快结束时，我心里却越来越觉得慌张。自己只熟悉 PHP 一门语言，其他的只能算是入门，这样还怎么成为**『全栈工程师』 **？还怎么愉快的写 Bug ？加上那段敏感时间里，实验室学长们也都签了不错的工作，有去 BAT 的，也有去其他知名互联网公司的。他们的离开让我觉得到伤感和不舍。偶尔还会思考，实验室的下一批成员会是什么样的，我们会不会相处的很好，已经成为学长的我，能不能像我的学长们那样，给别人提供正确的引导和帮助？</p>
<h2 id="选择"><a href="#选择" class="headerlink" title="选择"></a>选择</h2><p>​    空闲期的时间总是过得异常的快，转眼自己就已经大三了。突然发现，热爱了这么久的计算机，捣鼓着写了两年的代码，自己却没有一门能够拿得出手的技术。按照自己的规划，我是希望能够找一个不错的实习的。打开招聘网站却发现很多公司并没有 <code>PHP</code> 职位。当时的我，除了PHP就只会写前端了，还只能勉强算是个半吊子前端。我明确地，感受到了自己的压力和慌张。</p>
<p>​    想了段时间，我觉得剩下的一年里，学一门纯正的面向对象语言吧！可是具体要猛攻哪一门呢？ Java 在大一的有学过一段时间，但是很久不写，很多基本语法都已经不记得了。C++ 吧，当时确实用功学了半年，高级特性，内存管理，STL ，Boost 也都有好好看，只是后来也没好好用它写过项目。</p>
<p>​    其实这个问题我纠结了很久。也许很多人说 “其实不论什么编程语言只要你精通了一门，如果你能融汇贯通其实其他的语言也一样”。其实我是很抵触这种说法的，简单对于 C++ 和 Java 来说，就算你敢说你熟悉 C++ 我觉得短时间熟悉 Java 语法，能使用 Java 做开发是没问题的。就像我在大一的很大一段时间内是使用的以前编写 C++ 的思维去 Java 写的，这样不仅不能表现出这个语言的特性和优雅，反而会觉得使用起来有些蹩脚。就像一个长时间写驱动和系统软件的人去接手一个大型的 Web 项目，我想他很可能会写出垃圾代码来。</p>
<p>​    经过综合各方面的原因，我选择了Java。我知道，当我选择了一条路，另一条路上的风景便与我无关。一旦选择，我便不再摇摆不定。之后，全身心的学习Java是我每天都习以为常的事了。偶尔想想自己真的在面向‘’对象‘’编程，生活倒也怡然自得。</p>
<h2 id="转折"><a href="#转折" class="headerlink" title="转折"></a>转折</h2><p>​    良好的基础决定了成功的一半。当时的我，把 《疯狂 Java 讲义》 和 《 JDK 1.8 API 》 里面重要章节 Demo 都敲了一遍，把语言基础、集合框架、OO、IO、反射、多线程、Servlet、JSP、Hibernate …  理解的异常透彻，日常觉得自己是一个 “人工语法分析器” 。</p>
<p>​    可是当我掌握这些东西以后，我发现我好像一直停留在使用的阶段。这是一种有力气没出事的难受。后来，我开始思考，为什么我不去深入到底层探一探究竟？JDK 里的 <code>集合框架</code>、<code>并发工具包</code>、<code>IO</code>  究竟是如何实现的？Java 虚拟机是怎么运行起来的？JVM 的内存、GC、类加载、性能优化是怎么做到的？那些主流框架是如何设计的？DB 作为一个很重要的部分，我又该如何优化、如何做运维呢？这样的思考让我恐慌，却也促进了我的进步。我开始从另一个角度学习了。</p>
<p>​    回想那段时间，内心还是会燃气一股热血。那是知识的输入和输出都到达最大化的一个阶段。基本两天我就可以刷掉一本 200 - 400 页的书，然后整理笔记。记不起来的、感觉模糊的、牵扯到其他不理解的继续看书，找博客，弄清楚之后把自己的理解写在笔记上。有时候一天就坐在那敲一篇几万字的读书笔记。其实说不清痛苦还是快乐 …</p>
<p>​    当时差不多看了 30 多本经典书籍，也算是形成了比较完整的知识结构。那种高强度的训练让我把从大一学到的各种计算机专业知识都串起来了，好像突然打通了任督二脉，总能通过一个知识点发散出很多很多相关的知识。算得上是，真正跨入了开发的门槛。</p>
<h2 id="四月"><a href="#四月" class="headerlink" title="四月"></a>四月</h2><p>​    2018 年刚开学我就泡在图书馆看书了。看以前写的笔记，整理博客，重新思考之前刷过的错题。我发现不论是以前学习的东西还是以前做的项目都还有很大的提升空间。对于以前看的书做的笔记，我又重新做了一遍，发现自己又有了很多新的理解。对于项目也会思考以前为什么那么实现，现在让我实现会不会有更好的实现方式呢？剩下的就是刷题了，LeetCode 、牛客，熟悉一些常用的算法，为找实习做准备。</p>
<p>​    三月尾，我试着投了一些简历。四月初就开始陆陆续续面试了。说到面试，其实第一次面试大家都会紧张的，但是不要让过度的紧张让自己看起来应接不暇就可以了。之后的面试就会慢慢放松下来。其实面试，也就是一个双向的沟通学习，展示自己的过程，本没有太恐怖。找准定位，变现自己，就做到了能到到的最好了。</p>
<p>​    后面就是 腾讯、阿里、百度 、携程的面试了，基本这几家面试官都很和善的，一路也算是比较顺利，只是当时腾讯最后一个主管面的时候直接给了五道算法题，还必须用 C 写，然后下载一个 gcc + CLion 基本时间过去一大半了，最后只有十多分钟做了两道题，然后就没有然后了… </p>
<p>​    这里面印象比较好的就是阿里和携程了。阿里问的技术点都很深入，主要是因为问的点都偏向实际应用，我个人又更加喜欢这种关于实际开发的问题，另外也是我并不擅长算法。携程面试官则是对应聘者很热情，虽然当时面试场地没有腾讯那么大，但是面试官很 nice 的给我提了很多建议。</p>
<p>​    最后我还是去了阿里，毕竟那里是 Javaer 的天堂，也是我学Java最初的心愿了。</p>
<h2 id="实习"><a href="#实习" class="headerlink" title="实习"></a>实习</h2><p>​    阿里的师兄和师姐们都非常的 nice ，并且 对于新人的培养非常的用心。虽然感觉他们也特别忙碌，但师兄始终都很关心我，并给我找了很多资料让我熟悉业务，还抽出自己的空闲时间给我讲业务逻辑和项目结构。虽然在短时间内不能完全弄清楚公司业务，但是师兄的讲解还是让我受益颇多！</p>
<p>​    另外，在阿里的实习也让我再一次发现自己真的很渺小。我会发现原来还有这么多自己不知道的框架、系统和工具。于是我又开始宅了，只不过这一次，我宅的地方变成了公司。我每天熟悉系统的业务模型和组内维护的系统代码，还要安排时间学习集团内的新技术。忙碌而紧张的学习甚至让我来不及为自己的进步开心，只是在内心深处觉得自己应该在多学一点，在努力一点。不仅仅是为了对得起自己最初的心愿，也是为了对得起那些默默支持着我的，默默帮助着我的人。</p>
<h2 id="前行"><a href="#前行" class="headerlink" title="前行"></a>前行</h2><p>​    大四的时间过得异常的快，对于我来说，还没有好好感受过感受大学的美好就要匆匆说再见了。虽然我总是会在与别人交谈时避免谈到毕业的问题，可是自己心里清楚，自己留下了多少的遗憾。那些没有用心欣赏的玉兰花，没有好好感受过的西操场的风，以及那些来不及参与的一次次的同学聚会。</p>
<p>​    大四的生活也没有我曾经以为的那么空闲。我还是写着代码，改着论文，过着平凡而又规律的生活。也许有人会觉得，只有奋斗的大学不会遗憾吗？会的，当然会。可是，没有奋斗的大学可能就不只是遗憾了，而是悔恨。也许是习惯了忙碌而充实的生活，也许是自己骨子里无趣又枯燥的灵魂，总之，我想我还是会继续这般生活——全力以赴，问心无愧。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2019/04/14/Live/%E6%89%AC%E5%B8%86%E8%B5%B7%E8%88%AA/" data-id="cmblme3a400c1lppvhemofesw" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%94%9F%E6%B4%BB%E6%84%9F%E6%82%9F/" rel="tag">生活感悟</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Life/扬帆起航" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/04/14/Life/%E6%89%AC%E5%B8%86%E8%B5%B7%E8%88%AA/" class="article-date">
  <time datetime="2019-04-14T09:33:55.000Z" itemprop="datePublished">2019-04-14</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E7%94%9F%E6%B4%BB%E6%84%9F%E6%82%9F/">生活感悟</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/04/14/Life/%E6%89%AC%E5%B8%86%E8%B5%B7%E8%88%AA/">扬帆起航</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="扬帆起航"><a href="#扬帆起航" class="headerlink" title="扬帆起航"></a>扬帆起航</h1><p>其实很早就想写这篇文章，只是一直不知道从何说起。或者说，没能腾出一片完整的时间，给自己的大学生活写一个完整的回忆录。其实细细想来，这段时光更像是平静的水面，偶然也有湍急之处泛着白色的浪花。</p>
<h2 id="开始"><a href="#开始" class="headerlink" title="开始"></a>开始</h2><p>​    和大多数人一样，以萌新的身份来到大学，看着即将成为自己学长学姐的那群人，一时不知道从哪里开始了解这个陌生而又神秘的校园。好，美好的大学生活就先从图书馆开始。良好的习惯是成功一半，也得要先熟悉熟悉自己以后学习的地方。</p>
<p>​    摸索了挺久，才找到了计算机学科的阅览室。怎么说呢，被一大堆《Photoshop 从入门到精通》、《21 天精通 C 语言》、《JAVA语言精粹》吸引，幻想着自己真的能21天完成菜鸟到码神的逆袭。</p>
<p>​    好吧… 想多了，不过，我还是爱上了这个地方。接下来的一学期，就是扎根图书馆，进行名词式学习了。之所以称之为名词式学习，是真的觉得自己的学习，没有正确的方式。一股脑的恨不得把没听过的东西都去学一遍，没见过的语言都想办法 <strong>『21天精通』</strong> 。于是，我成了一个彻底的 “宅男” ，只不过宅的是图书馆。</p>
<p>​    所以还是想说，要在正确的路上做正确的事。这时候，一个好的引导者就显得尤为重要。他会带着你，踩尽量少的坑，走弯路更少的路。这个人，可以是你的老师，你的学长学姐，偶然发现的你们班里的大神。记得，找最适合自己的人，走最适合自己的路。</p>
<h2 id="LAMP-光"><a href="#LAMP-光" class="headerlink" title="LAMP - 光"></a>LAMP - 光</h2><p>​    庆幸的是，我的野路子并没有持续太久，我找到了方向——加入实验室。这就是我想说的另一点了，加入实验室。任何时候都不要说 “等我在多学点，再怎么怎么样”。要知道，实验室本身就是，可以更好的更快的学习新东西并快速实践的地方。</p>
<p>​    我在大一下学期就进入了网络中心，也是在这里下定了决心一门心思的去做开发，不再一味的折腾 Linux 。（PS：如果不是想要看内核源码或者做系统运维，就不用花大量时间折腾 Linux 软件了，时间上比较不划算）</p>
<p>​    加入了正规军，也接受了更正规的训练。我更加清楚，作为一名计算机专业的学生，我以后要走的是一条什么样的路，要成为一个怎么样的人。我们的团队叫做 “LMAP” ，取自我们开发使用的技术栈，同时也有 “光” 的含义！在这里，我度过了我的整个大学时光。</p>
<p>​    已经说不清楚，那些曾经帮助过我的老师和学长们，是我所尊敬的师长，还是陪我一起成长的家人了。我们一起撸过凌晨两点的小院烧烤，也一起看过凌晨四点钟的西大，我想在这里特别感谢帮助过我的 『杨建丰』老师，以及 『金刚』 学长， 『文科』 学长！</p>
<h2 id="嘉木"><a href="#嘉木" class="headerlink" title="嘉木"></a>嘉木</h2><p>​    我想说一件，我大学里很骄傲的事。也许没什么人听过，但确确实实是我大学里很珍贵的财富。事情源于大二上学期，在一个学长的组织下我们准备建设西北大学自己的 PT 站点。奈何出师未捷身先死，本来组建的团队还没开始开发就解散了。我很感谢20岁的我，可以那么勇敢得，去一个人做我现在可能有顾虑的事。</p>
<p>​    项目基于开源的 “NexusPHP 项目” 。其实关于这个项目的案例很多，但是资料很少，很多高校采用了这套代码，并且进行了魔改，但是遗憾的是并没有开源。怀着雄心壮志，我一个人上路了。我想把它做好，然后开源出去，哪怕困难重重（事实证明遇到的困恼是重重重重重）。</p>
<p>​    项目从九月中旬一直到十二月份，出了三个测试版本。这段时间基本除了上课时间我都是坐在电脑前面赶项目。由于 NexusPHP 是 2006 年开发的，当时的开发团队采用了比较原始的前后端夹杂的方式，代码基本没有可维护性而言，大部分还是 function block 基本不存在 OO 设计，HTML 和 CSS 基本全部嵌在 PHP 中，一个文件 1000 - 3000 行，甚至还有 15000 行的。那段时间真的是日常崩溃 ，不知道因为改代码电脑死机多少次，又熬了多少次夜。经常为了一个问题和功能，想到睡不着觉，有时候做梦都在写代码，想要看着自己的成果，早点问世。</p>
<p>​    十二月份，第一个上线的版本终于确定了，第一周的注册量只有 500 。不过，当时上线的时间确实也是选择的不对，那时候快要期末考试，大家一门心思复习，没什么时间关注别的东西。第二年又对界面进行了重构，基本是全新的 UI。之后，我们也想了很多办法去提高用户量。我们组织了一些宣传活动有推出了嘉木的纪念文化衫，还想了很多办法降低用户使用站点的门槛，但是最终用户活跃度始终稳定在几百人，并没有达到预期。</p>
<p>​    最终，站点只运行了一年，由于多方面的问题被关停。这次的失败也让我明白，一个产品的孵化并不简简单单的依靠技术，产品的运营和团队管理是上层建筑。没有好的运营和管理，再好的产品也没有办法发挥价值。</p>
<p>​    另外比较庆幸的是，这次之后，我确实发现自己的技术得到了质的飞跃——毕竟 10 多万行代码的编码经验和调试上的经验比看书来的要真切的多，也算是真切的体会到 “纸上得来终觉浅，绝知此事要躬行”  。</p>
<h2 id="迷茫"><a href="#迷茫" class="headerlink" title="迷茫"></a>迷茫</h2><p>​    其实在嘉木比较稳定运行期间，就没有太多额外的开发工作了。那段时间除了处理实验室老师交代的任务之外，就全身心的投入到 <code>ThinkPHP</code> 和 <code>OneThink</code> 的源码。其实源码看了会很容易忘掉，所以不仅仅是看，看完以后我都会凭着印象和思路再敲一遍，实现框架和系统的核心部分。</p>
<p>​    我在阅读读 <code>OneThink</code> 源码时就明显感觉到了自己和巨佬们之间的差距。虽然说 <code>OneThink</code> 源码不是那种 “Bible 级别” ，但官方对 TP 的运用确实称的上炉火纯青。一边阅读，一边发现原来<code>ThinkPHP</code> 可以这么写，原来那么多特性是可以这么使用的，原来一个简单的模块需要这么多代码保证高扩展性，健壮性，和稳定性。</p>
<p>​    大二快结束时，我心里却越来越觉得慌张。自己只熟悉 PHP 一门语言，其他的只能算是入门，这样还怎么成为**『全栈工程师』 **？还怎么愉快的写 Bug ？加上那段敏感时间里，实验室学长们也都签了不错的工作，有去 BAT 的，也有去其他知名互联网公司的。他们的离开让我觉得到伤感和不舍。偶尔还会思考，实验室的下一批成员会是什么样的，我们会不会相处的很好，已经成为学长的我，能不能像我的学长们那样，给别人提供正确的引导和帮助？</p>
<h2 id="选择"><a href="#选择" class="headerlink" title="选择"></a>选择</h2><p>​    空闲期的时间总是过得异常的快，转眼自己就已经大三了。突然发现，热爱了这么久的计算机，捣鼓着写了两年的代码，自己却没有一门能够拿得出手的技术。按照自己的规划，我是希望能够找一个不错的实习的。打开招聘网站却发现很多公司并没有 <code>PHP</code> 职位。当时的我，除了PHP就只会写前端了，还只能勉强算是个半吊子前端。我明确地，感受到了自己的压力和慌张。</p>
<p>​    想了段时间，我觉得剩下的一年里，学一门纯正的面向对象语言吧！可是具体要猛攻哪一门呢？ Java 在大一的有学过一段时间，但是很久不写，很多基本语法都已经不记得了。C++ 吧，当时确实用功学了半年，高级特性，内存管理，STL ，Boost 也都有好好看，只是后来也没好好用它写过项目。</p>
<p>​    其实这个问题我纠结了很久。也许很多人说 “其实不论什么编程语言只要你精通了一门，如果你能融汇贯通其实其他的语言也一样”。其实我是很抵触这种说法的，简单对于 C++ 和 Java 来说，就算你敢说你熟悉 C++ 我觉得短时间熟悉 Java 语法，能使用 Java 做开发是没问题的。就像我在大一的很大一段时间内是使用的以前编写 C++ 的思维去 Java 写的，这样不仅不能表现出这个语言的特性和优雅，反而会觉得使用起来有些蹩脚。就像一个长时间写驱动和系统软件的人去接手一个大型的 Web 项目，我想他很可能会写出垃圾代码来。</p>
<p>​    经过综合各方面的原因，我选择了Java。我知道，当我选择了一条路，另一条路上的风景便与我无关。一旦选择，我便不再摇摆不定。之后，全身心的学习Java是我每天都习以为常的事了。偶尔想想自己真的在面向‘’对象‘’编程，生活倒也怡然自得。</p>
<h2 id="转折"><a href="#转折" class="headerlink" title="转折"></a>转折</h2><p>​    良好的基础决定了成功的一半。当时的我，把 《疯狂 Java 讲义》 和 《 JDK 1.8 API 》 里面重要章节 Demo 都敲了一遍，把语言基础、集合框架、OO、IO、反射、多线程、Servlet、JSP、Hibernate …  理解的异常透彻，日常觉得自己是一个 “人工语法分析器” 。</p>
<p>​    可是当我掌握这些东西以后，我发现我好像一直停留在使用的阶段。这是一种有力气没出事的难受。后来，我开始思考，为什么我不去深入到底层探一探究竟？JDK 里的 <code>集合框架</code>、<code>并发工具包</code>、<code>IO</code>  究竟是如何实现的？Java 虚拟机是怎么运行起来的？JVM 的内存、GC、类加载、性能优化是怎么做到的？那些主流框架是如何设计的？DB 作为一个很重要的部分，我又该如何优化、如何做运维呢？这样的思考让我恐慌，却也促进了我的进步。我开始从另一个角度学习了。</p>
<p>​    回想那段时间，内心还是会燃气一股热血。那是知识的输入和输出都到达最大化的一个阶段。基本两天我就可以刷掉一本 200 - 400 页的书，然后整理笔记。记不起来的、感觉模糊的、牵扯到其他不理解的继续看书，找博客，弄清楚之后把自己的理解写在笔记上。有时候一天就坐在那敲一篇几万字的读书笔记。其实说不清痛苦还是快乐 …</p>
<p>​    当时差不多看了 30 多本经典书籍，也算是形成了比较完整的知识结构。那种高强度的训练让我把从大一学到的各种计算机专业知识都串起来了，好像突然打通了任督二脉，总能通过一个知识点发散出很多很多相关的知识。算得上是，真正跨入了开发的门槛。</p>
<h2 id="四月"><a href="#四月" class="headerlink" title="四月"></a>四月</h2><p>​    2018 年刚开学我就泡在图书馆看书了。看以前写的笔记，整理博客，重新思考之前刷过的错题。我发现不论是以前学习的东西还是以前做的项目都还有很大的提升空间。对于以前看的书做的笔记，我又重新做了一遍，发现自己又有了很多新的理解。对于项目也会思考以前为什么那么实现，现在让我实现会不会有更好的实现方式呢？剩下的就是刷题了，LeetCode 、牛客，熟悉一些常用的算法，为找实习做准备。</p>
<p>​    三月尾，我试着投了一些简历。四月初就开始陆陆续续面试了。说到面试，其实第一次面试大家都会紧张的，但是不要让过度的紧张让自己看起来应接不暇就可以了。之后的面试就会慢慢放松下来。其实面试，也就是一个双向的沟通学习，展示自己的过程，本没有太恐怖。找准定位，变现自己，就做到了能到到的最好了。</p>
<p>​    后面就是 腾讯、阿里、百度 、携程的面试了，基本这几家面试官都很和善的，一路也算是比较顺利，只是当时腾讯最后一个主管面的时候直接给了五道算法题，还必须用 C 写，然后下载一个 gcc + CLion 基本时间过去一大半了，最后只有十多分钟做了两道题，然后就没有然后了… </p>
<p>​    这里面印象比较好的就是阿里和携程了。阿里问的技术点都很深入，主要是因为问的点都偏向实际应用，我个人又更加喜欢这种关于实际开发的问题，另外也是我并不擅长算法。携程面试官则是对应聘者很热情，虽然当时面试场地没有腾讯那么大，但是面试官很 nice 的给我提了很多建议。</p>
<p>​    最后我还是去了阿里，毕竟那里是 Javaer 的天堂，也是我学Java最初的心愿了。</p>
<h2 id="实习"><a href="#实习" class="headerlink" title="实习"></a>实习</h2><p>​    阿里的师兄和师姐们都非常的 nice ，并且 对于新人的培养非常的用心。虽然感觉他们也特别忙碌，但师兄始终都很关心我，并给我找了很多资料让我熟悉业务，还抽出自己的空闲时间给我讲业务逻辑和项目结构。虽然在短时间内不能完全弄清楚公司业务，但是师兄的讲解还是让我受益颇多！</p>
<p>​    另外，在阿里的实习也让我再一次发现自己真的很渺小。我会发现原来还有这么多自己不知道的框架、系统和工具。于是我又开始宅了，只不过这一次，我宅的地方变成了公司。我每天熟悉系统的业务模型和组内维护的系统代码，还要安排时间学习集团内的新技术。忙碌而紧张的学习甚至让我来不及为自己的进步开心，只是在内心深处觉得自己应该在多学一点，在努力一点。不仅仅是为了对得起自己最初的心愿，也是为了对得起那些默默支持着我的，默默帮助着我的人。</p>
<h2 id="前行"><a href="#前行" class="headerlink" title="前行"></a>前行</h2><p>​    大四的时间过得异常的快，对于我来说，还没有好好感受过感受大学的美好就要匆匆说再见了。虽然我总是会在与别人交谈时避免谈到毕业的问题，可是自己心里清楚，自己留下了多少的遗憾。那些没有用心欣赏的玉兰花，没有好好感受过的西操场的风，以及那些来不及参与的一次次的同学聚会。</p>
<p>​    大四的生活也没有我曾经以为的那么空闲。我还是写着代码，改着论文，过着平凡而又规律的生活。也许有人会觉得，只有奋斗的大学不会遗憾吗？会的，当然会。可是，没有奋斗的大学可能就不只是遗憾了，而是悔恨。也许是习惯了忙碌而充实的生活，也许是自己骨子里无趣又枯燥的灵魂，总之，我想我还是会继续这般生活——全力以赴，问心无愧。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2019/04/14/Life/%E6%89%AC%E5%B8%86%E8%B5%B7%E8%88%AA/" data-id="cmblme39o00ablppv1yj51h20" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%94%9F%E6%B4%BB%E6%84%9F%E6%82%9F/" rel="tag">生活感悟</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Spring/Spring 源码分析(一)" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/03/15/Spring/Spring%20%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90(%E4%B8%80)/" class="article-date">
  <time datetime="2019-03-15T15:02:37.000Z" itemprop="datePublished">2019-03-15</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Spring-%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/">Spring 源码分析</a>►<a class="article-category-link" href="/categories/Spring-%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/Spring/">Spring</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/03/15/Spring/Spring%20%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90(%E4%B8%80)/">Spring 源码分析(一)</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Spring-源码分析-一"><a href="#Spring-源码分析-一" class="headerlink" title="Spring 源码分析 (一)"></a>Spring 源码分析 (一)</h2>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2019/03/15/Spring/Spring%20%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90(%E4%B8%80)/" data-id="cmblme3ar00edlppv6e3merbx" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Spring/" rel="tag">Spring</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Spring-%E6%BA%90%E7%A0%81/" rel="tag">Spring 源码</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%BA%90%E7%A0%81/" rel="tag">源码</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-FrontEnd/WebStrom 技巧" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/01/21/FrontEnd/WebStrom%20%E6%8A%80%E5%B7%A7/" class="article-date">
  <time datetime="2019-01-21T15:28:28.000Z" itemprop="datePublished">2019-01-21</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E5%B7%A5%E5%85%B7/">工具</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/01/21/FrontEnd/WebStrom%20%E6%8A%80%E5%B7%A7/">WebStrom 使用技巧</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="1-React-live-template"><a href="#1-React-live-template" class="headerlink" title="1. React live template"></a>1. React live template</h2><ol>
<li>state    this.state</li>
<li>sst       this.setState</li>
<li>rpc    生成组件类</li>
<li>rsfp      生成组件函数</li>
<li>rrc        具有redux的组件类</li>
<li>rpt        propTypes</li>
<li>ren       render 方法</li>
<li>ptsr   string required</li>
<li>pts     string 类型</li>
<li>pto  object 类型</li>
<li>ptor    object required</li>
<li>ptn/ptnr ptf/ptfr  ptb/ptbf  pta/ptar     number / function / bool /array</li>
<li>props     this.props</li>
<li>est     this.state={}</li>
<li>cdm    componentDidMount</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2019/01/21/FrontEnd/WebStrom%20%E6%8A%80%E5%B7%A7/" data-id="cmblme37g0038lppvfneadaho" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%B7%A5%E5%85%B7-WebStrom-JetBrains/" rel="tag">工具 WebStrom JetBrains</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-FrontEnd/React 实战" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/01/17/FrontEnd/React%20%E5%AE%9E%E6%88%98/" class="article-date">
  <time datetime="2019-01-17T11:20:28.000Z" itemprop="datePublished">2019-01-17</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/FrontEnd/">FrontEnd</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/01/17/FrontEnd/React%20%E5%AE%9E%E6%88%98/">React 实战</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="1-目录"><a href="#1-目录" class="headerlink" title="1.目录"></a>1.目录</h2><p><img src="http://images.heniankj.com/20190117112438.png"></p>
<h2 id="2-依赖安装"><a href="#2-依赖安装" class="headerlink" title="2.依赖安装"></a>2.依赖安装</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">cnpm install antd-mobile -S </span><br><span class="line">//组件按需加载  第二个是用来做react脚手架的二次配置的，因为我们看不到Webpack的配置文件了 https://www.cnblogs.com/xiaohuochai/p/8491055.html</span><br><span class="line">cnpm install --save-dev babel-plugin-import react-app-rewired@2.0.2-next.0 //注意指定版本号否则不兼容</span><br><span class="line">cnpm install --save-dev less@2.7.3 less-loader</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="3-配置项目"><a href="#3-配置项目" class="headerlink" title="3.配置项目"></a>3.配置项目</h2><h3 id="1-修改index添加触摸事件"><a href="#1-修改index添加触摸事件" class="headerlink" title="1.修改index添加触摸事件"></a>1.修改index添加触摸事件</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://as.alipayobjects.com/g/component/fastclick/1.0.6/fastclick.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">if</span> (<span class="string">&#x27;addEventListener&#x27;</span> <span class="keyword">in</span> <span class="built_in">document</span>) &#123;</span></span><br><span class="line"><span class="javascript">        <span class="built_in">document</span>.addEventListener(<span class="string">&#x27;DOMContentLoaded&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">          FastClick.attach(<span class="built_in">document</span>.body);</span></span><br><span class="line"><span class="javascript">        &#125;, <span class="literal">false</span>);</span></span><br><span class="line">      &#125;</span><br><span class="line"><span class="javascript">      <span class="function"><span class="title">if</span>(<span class="params">!<span class="built_in">window</span>.<span class="built_in">Promise</span></span>)</span> &#123;</span></span><br><span class="line"><span class="javascript">        <span class="built_in">document</span>.writeln(<span class="string">&#x27;&lt;script src=&quot;https://as.alipayobjects.com/g/component/es6-promise/3.2.2/es6-promise.min.js&quot;&#x27;</span>+<span class="string">&#x27;&gt;&#x27;</span>+<span class="string">&#x27;&lt;&#x27;</span>+<span class="string">&#x27;/&#x27;</span>+<span class="string">&#x27;script&gt;&#x27;</span>);</span></span><br><span class="line">      &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="2-添加-antd-配置文件-config-overrides-js"><a href="#2-添加-antd-配置文件-config-overrides-js" class="headerlink" title="2.添加 antd 配置文件 config-overrides.js"></a>2.添加 antd 配置文件 config-overrides.js</h3><p>注意这个文件不是在 src 下面而是在整个项目的与 package,json 同级的目录。定义加载配置的 js 模块 !</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123;injectBabelPlugin&#125; = <span class="built_in">require</span>(<span class="string">&#x27;react-app-rewired&#x27;</span>);</span><br><span class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span> <span class="title">override</span>(<span class="params">config, env</span>) </span>&#123;</span><br><span class="line">config = injectBabelPlugin([<span class="string">&#x27;import&#x27;</span>, &#123;<span class="attr">libraryName</span>: <span class="string">&#x27;antd-mobile&#x27;</span>, <span class="attr">style</span>: <span class="string">&#x27;css&#x27;</span>&#125;],</span><br><span class="line">config);</span><br><span class="line"><span class="keyword">return</span> config;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>修改配置: package.json </p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&quot;scripts&quot;: &#123;</span><br><span class="line">    &quot;start&quot;: &quot;react-app-rewired start&quot;,</span><br><span class="line">    &quot;build&quot;: &quot;react-app-rewired build&quot;,</span><br><span class="line">    &quot;test&quot;: &quot;react-app-rewired test --env=jsdom&quot;,</span><br><span class="line">    &quot;eject&quot;: &quot;react-scripts eject&quot;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>

<p>这是关于自定义配置的内容  <a target="_blank" rel="noopener" href="https://ant.design/docs/react/use-with-create-react-app-cn">Antd配置</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2019/01/17/FrontEnd/React%20%E5%AE%9E%E6%88%98/" data-id="cmblme37f0036lppvcbe7df6q" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/React/" rel="tag">React</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-DataBase/MangoDB 入门" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/01/16/DataBase/MangoDB%20%E5%85%A5%E9%97%A8/" class="article-date">
  <time datetime="2019-01-16T09:53:28.000Z" itemprop="datePublished">2019-01-16</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/01/16/DataBase/MangoDB%20%E5%85%A5%E9%97%A8/">MangoDB 入门</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="1-设置为windows启动项"><a href="#1-设置为windows启动项" class="headerlink" title="1. 设置为windows启动项"></a>1. 设置为windows启动项</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mongod -dbpath <span class="string">&quot;C:\Program Files\MongoDB\Server\4.0\data&quot;</span> -logpath <span class="string">&quot;C:\Program Files\MongoDB\Server\4.0\log\MongoDB.log&quot;</span> -install -serviceName <span class="string">&quot;MongoDB&quot;</span></span><br></pre></td></tr></table></figure>

<h2 id="2-基本概念"><a href="#2-基本概念" class="headerlink" title="2.基本概念"></a>2.基本概念</h2><ol>
<li>数据库（database）:数据的仓库可以在仓库中存放集合</li>
<li>集合（collection）：集合是数组可以在集合中存放文档</li>
<li>文档（document）：存储操作的都是文档，文档是数据库中最小的单位。</li>
</ol>
<p>在MongoDB中，数据库和集合都不需要手动创建，当我们创建文档时，如果文档所在的集合或数据库不存在会自动创建数据库和集合.MongoDB的文档的属性值也可以是一个文档，当一个文档的属性值是一个文档时，我们称这个文档叫做 内嵌文档</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.users.update(&#123;username:&quot;sunwukong&quot;&#125;,&#123;$set:&#123;hobby:&#123;cities:[&quot;beijing&quot;,&quot;shanghai&quot;,&quot;shenzhen&quot;] , movies:[&quot;sanguo&quot;,&quot;hero&quot;]&#125;&#125;&#125;);</span><br></pre></td></tr></table></figure>



<h2 id="3-基本指令"><a href="#3-基本指令" class="headerlink" title="3.基本指令"></a>3.基本指令</h2><h3 id="1-显示数据库"><a href="#1-显示数据库" class="headerlink" title="1. 显示数据库"></a>1. 显示数据库</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">show dbs</span><br><span class="line">show databases</span><br></pre></td></tr></table></figure>



<h3 id="2-进入到指定的数据库中"><a href="#2-进入到指定的数据库中" class="headerlink" title="2.进入到指定的数据库中"></a>2.进入到指定的数据库中</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">use 数据库名</span><br></pre></td></tr></table></figure>

<p>​    如果我们use了一个不存在的数据库他也不会报错而是在我们第一次创建文档的时候创建这个数据库，在MongoDB中所有的数据库和集合都不需要我们去创建的 。</p>
<h3 id="3-当前所处的数据库"><a href="#3-当前所处的数据库" class="headerlink" title="3.当前所处的数据库"></a>3.当前所处的数据库</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db</span><br></pre></td></tr></table></figure>

<p>注意一下 db 就类似于 this 只想当前的上下文，我们在后面的 crud 操作可以直接使用数据库名也可以在进入到数据库之后直接使用 db</p>
<h3 id="4-显示数据库中所有的集合"><a href="#4-显示数据库中所有的集合" class="headerlink" title="4.显示数据库中所有的集合"></a>4.显示数据库中所有的集合</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show collections</span><br></pre></td></tr></table></figure>

<h3 id="5-数据库的CRUD（增删改查）的操作"><a href="#5-数据库的CRUD（增删改查）的操作" class="headerlink" title="5.数据库的CRUD（增删改查）的操作"></a>5.数据库的CRUD（增删改查）的操作</h3><h4 id="1-向数据库中插入文档"><a href="#1-向数据库中插入文档" class="headerlink" title="1.向数据库中插入文档"></a>1.向数据库中插入文档</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.&lt;collection&gt;.insert()  向集合中插入一个或多个文档</span><br></pre></td></tr></table></figure>

<p>当我们向集合中插入文档时，如果没有给文档指定_id属性，则数据库会自动为文档添加  <code> _id</code> 该属性用来作为文档的唯一标识 , <code> _id</code>我们可以自己指定，如果我们指定了数据库就不会在添加了，如果自己指定_id 也必须确保它的唯一性</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">db.collection.insertOne()  插入一个文档对象</span><br><span class="line">db.collection.insertMany()  插入多个文档对象</span><br></pre></td></tr></table></figure>

<p>上面的是在3.2 版本中新加的操作，为了语义更加的明确。</p>
<p>例子：向test数据库中的，stus集合中插入一个新的学生对象<br>{name:”孙悟空”,age:18,gender:”男”}</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">db.stus.insert(&#123;name:&quot;孙悟空&quot;,age:18,gender:&quot;男&quot;&#125;)</span><br><span class="line">test.stus.insert(&#123;name:“lwne”,age:12,gender:“女”&#125;)</span><br><span class="line">use test;</span><br><span class="line">db.stus.insert(&#123;name:&quot;lwen&quot;,age:12&#125;)</span><br><span class="line">db.stus.insert([</span><br><span class="line">&#123;name:&quot;lwen&quot;,age:12&#125;,</span><br><span class="line">&#123;name:&quot;lwen&quot;,age:12&#125;,</span><br><span class="line">&#123;name:&quot;lwen&quot;,age:12&#125;</span><br><span class="line">])</span><br><span class="line">db.stus.find()</span><br></pre></td></tr></table></figure>

<h4 id="2-查询"><a href="#2-查询" class="headerlink" title="2.查询"></a>2.查询</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.collection.find()</span><br></pre></td></tr></table></figure>

<p>find()用来查询集合中所有符合条件的文档，find()可以接收一个对象作为条件参数<br>{} 空对象或者{ }表示查询集合中所有的文档<br>{属性:值} 查询属性是指定值的文档</p>
<p>find()返回的是一个数组</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.collection.findOne()</span><br></pre></td></tr></table></figure>

<p>用来查询集合中符合条件的第一个文档  ，findOne()返回的是一个文档对象 </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.collection.find(&#123;&#125;).count() </span><br></pre></td></tr></table></figure>

<p>查询所有结果的数量</p>
<p>MongoDB支持直接通过内嵌文档的属性进行查询，如果要查询内嵌文档则可以通过.的形式来匹配<br>如果要通过内嵌文档来对文档进行查询，此时属性名必须使用引号 </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.users.find(&#123;&#39;hobby.movies&#39;:&quot;hero&quot;&#125;);</span><br></pre></td></tr></table></figure>

<p>逻辑条件查询：</p>
<p>19.查询numbers中num大于5000的文档</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">db.numbers.find(&#123;num:&#123;$gt:500&#125;&#125;); 大于500</span><br><span class="line">db.numbers.find(&#123;num:&#123;$eq:500&#125;&#125;); 等于500</span><br><span class="line">db.numbers.find().limit(10); 查看numbers集合中的前10条数据</span><br><span class="line">db.numbers.find(); 开发时，我们绝对不会执行不带条件的查询</span><br><span class="line">db.numbers.find().skip(10).limit(10);</span><br><span class="line">db.emp.find(&#123;sal:&#123;$lt:2000 , $gt:1000&#125;&#125;); 查询工资在1000-2000之间的员工</span><br><span class="line">db.emp.find(&#123;$or:[&#123;sal:&#123;$lt:1000&#125;&#125; , &#123;sal:&#123;$gt:2500&#125;&#125;]&#125;); 查询工资小于1000或大于2500的员工</span><br></pre></td></tr></table></figure>

<p>skip()用于跳过指定数量的数据  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">skip((页码-1) * 每页显示的条数).limit(每页显示的条数);  数据分页</span><br></pre></td></tr></table></figure>



<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">db.stus.find(&#123;_id:&quot;hello&quot;&#125;);</span><br><span class="line">db.stus.find(&#123;age:16 , name:&quot;白骨精&quot;&#125;);</span><br><span class="line">db.stus.find(&#123;age:28&#125;);</span><br><span class="line">db.stus.findOne(&#123;age:28&#125;);</span><br><span class="line">db.stus.find(&#123;&#125;).count();</span><br></pre></td></tr></table></figure>

<h4 id="3-修改"><a href="#3-修改" class="headerlink" title="3.修改"></a>3.修改</h4><p> db.collection.update(查询条件,新对象)</p>
<p>update()默认情况下会使用新对象来替换旧的对象</p>
<p>如果需要修改指定的属性，而不是替换需要使用“修改操作符”来完成修改<br><code>$set</code> 可以用来修改文档中的指定属性<br><code>$unset</code> 可以用来删除文档的指定属性</p>
<p><code>$push</code> 用于向数组中添加一个新的元素<br><code>$addToSet</code> 向数组中添加一个新元素 ， 如果数组中已经存在了该元素，则不会添加</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">db.users.update(&#123;username:&quot;tangseng&quot;&#125;,&#123;$push:&#123;&quot;hobby.movies&quot;:&quot;Interstellar&quot;&#125;&#125;);</span><br><span class="line">db.users.update(&#123;username:&quot;tangseng&quot;&#125;,&#123;$addToSet:&#123;&quot;hobby.movies&quot;:&quot;Interstellar&quot;&#125;&#125;);</span><br></pre></td></tr></table></figure>

<p>update()默认只会修改一个</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.collection.updateMany()</span><br></pre></td></tr></table></figure>

<p>同时修改多个符合条件的文档</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.collection.updateOne()</span><br></pre></td></tr></table></figure>

<p>修改一个符合条件的文档    </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.collection.replaceOne()</span><br></pre></td></tr></table></figure>

<p>替换一个文档</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;替换</span><br><span class="line">db.stus.update(&#123;name:&quot;沙和尚&quot;&#125;,&#123;age:28&#125;);</span><br><span class="line"></span><br><span class="line">db.stus.update(</span><br><span class="line">    &#123;&quot;_id&quot; : ObjectId(&quot;59c219689410bc1dbecc0709&quot;)&#125;,</span><br><span class="line">    &#123;$set:&#123;</span><br><span class="line">        gender:&quot;男&quot;,</span><br><span class="line">        address:&quot;流沙河&quot;</span><br><span class="line">    &#125;&#125;    </span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">db.stus.update(</span><br><span class="line">    &#123;&quot;_id&quot; : ObjectId(&quot;59c219689410bc1dbecc0709&quot;)&#125;,</span><br><span class="line">    &#123;$unset:&#123;</span><br><span class="line">        address:1</span><br><span class="line">    &#125;&#125;    </span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">db.stus.updateMany(</span><br><span class="line">    &#123;&quot;name&quot; : &quot;猪八戒&quot;&#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        $set:&#123;</span><br><span class="line">            address:&quot;猪老庄&quot;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;    </span><br><span class="line">);</span><br><span class="line">    </span><br><span class="line">db.stus.update(</span><br><span class="line">    &#123;&quot;name&quot; : &quot;猪八戒&quot;&#125;,</span><br><span class="line">    </span><br><span class="line">    &#123;</span><br><span class="line">        $set:&#123;</span><br><span class="line">        address:&quot;呵呵呵&quot;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;  ,</span><br><span class="line">    &#123;</span><br><span class="line">        multi:true</span><br><span class="line">    &#125;    </span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<h4 id="4-删除"><a href="#4-删除" class="headerlink" title="4.删除"></a>4.删除</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.collection.remove()</span><br></pre></td></tr></table></figure>

<p>删除一个或多个，可以第二个参数传递一个true，则只会删除一个</p>
<p>如果传递一个空对象作为参数，则会删除所有的</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">db.collection.deleteOne()</span><br><span class="line">db.collection.deleteMany()</span><br><span class="line">db.collection.drop() 删除集合</span><br><span class="line">db.dropDatabase() 删除数据库</span><br></pre></td></tr></table></figure>

<p>一般数据库中的数据都不会删除，所以删除的方法很少调用，一般会在数据中添加一个字段，来表示数据是否被删除</p>
<h3 id="6-排序投影"><a href="#6-排序投影" class="headerlink" title="6.排序投影"></a>6.排序投影</h3><p>查询文档时，默认情况是按照_id的值进行排列（升序），sort()可以用来指定文档的排序的规则,sort()需要传递一个对象来指定排序规则 1表示升序 -1表示降序</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;limit skip sort 可以以任意的顺序进行调用</span><br><span class="line">db.emp.find(&#123;&#125;).sort(&#123;sal:1,empno:-1&#125;);</span><br></pre></td></tr></table></figure>

<p>在查询时，可以在第二个参数的位置来设置查询结果的 投影</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.emp.find(&#123;&#125;,&#123;ename:1 , _id:0 , sal:1&#125;);</span><br></pre></td></tr></table></figure>



<h2 id="4-mongoose"><a href="#4-mongoose" class="headerlink" title="4. mongoose"></a>4. mongoose</h2><h3 id="1-连接数据库"><a href="#1-连接数据库" class="headerlink" title="1. 连接数据库"></a>1. 连接数据库</h3><ol>
<li>下载安装Mongoose</li>
</ol>
<p>​        npm i mongoose –save</p>
<ol start="2">
<li>在项目中引入mongoose</li>
</ol>
<p>​        var mongoose = require(“mongoose”);</p>
<ol start="3">
<li><p>连接MongoDB数据库</p>
<p> mongoose.connect(‘mongodb://数据库的ip地址:端口号/数据库名’, { useMongoClient: true});如果端口号是默认端口号（27017） 则可以省略不写</p>
</li>
<li><p>断开数据库连接(一般不需要调用)</p>
<p>MongoDB数据库，一般情况下，只需要连接一次，连接一次以后，除非项目停止服务器关闭，否则连接一般不会断开mongoose.disconnect()</p>
</li>
<li><p>监听MongoDB数据库的连接状态</p>
<p>在mongoose对象中，有一个属性叫做connection，该对象表示的就是数据库连接.通过监视该对象的状态，可以来监听数据库的连接与断开</p>
<ol>
<li>数据库连接成功的事件</li>
</ol>
</li>
</ol>
<p>​        mongoose.connection.once(“open”,function(){})}</p>
<p>​    2. 数据库断开的事件</p>
<p>​        mongoose.connection.once(“close”,function(){});</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;引入</span><br><span class="line">var mongoose &#x3D; require(&quot;mongoose&quot;);</span><br><span class="line">&#x2F;&#x2F;连接数据库</span><br><span class="line">mongoose.connect(&quot;mongodb:&#x2F;&#x2F;127.0.0.1&#x2F;mongoose_test&quot; , &#123; useMongoClient: true&#125;);</span><br><span class="line"></span><br><span class="line">mongoose.connection.once(&quot;open&quot;,function()&#123;</span><br><span class="line">	console.log(&quot;数据库连接成功~~~&quot;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">mongoose.connection.once(&quot;close&quot;,function()&#123;</span><br><span class="line">	console.log(&quot;数据库连接已经断开~~~&quot;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;断开数据库连接</span><br><span class="line">mongoose.disconnect();</span><br></pre></td></tr></table></figure>

<h3 id="2-Schema"><a href="#2-Schema" class="headerlink" title="2. Schema"></a>2. Schema</h3><p>这个东西可以看做我们的关系数据库的表的约束。比如哪些字段必须有，而且他的值是什么类型，默认值是什么，这样我们在语言中就不会出现类型转换错误的情况，并且在mongoose中也会帮我们去做转换。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">var mongoose &#x3D; require(&quot;mongoose&quot;);</span><br><span class="line">mongoose.connect(&quot;mongodb:&#x2F;&#x2F;127.0.0.1&#x2F;mongoose_test&quot;,&#123;useMongoClient:true&#125;);</span><br><span class="line">mongoose.connection.once(&quot;open&quot;,function () &#123;</span><br><span class="line">	console.log(&quot;数据库连接成功~~~&quot;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;将mongoose.Schema 赋值给一个变量</span><br><span class="line">var Schema &#x3D; mongoose.Schema;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;创建Schema（模式）对象</span><br><span class="line">var stuSchema &#x3D; new Schema(&#123;</span><br><span class="line"></span><br><span class="line">	name:String,</span><br><span class="line">	age:Number,</span><br><span class="line">	gender:&#123;</span><br><span class="line">		type:String,</span><br><span class="line">		default:&quot;female&quot;</span><br><span class="line">	&#125;,</span><br><span class="line">	address:String</span><br><span class="line"></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;通过Schema来创建Model</span><br><span class="line">&#x2F;&#x2F;Model代表的是数据库中的集合，通过Model才能对数据库进行操作</span><br><span class="line">&#x2F;&#x2F;mongoose.model(modelName, schema):</span><br><span class="line">&#x2F;&#x2F;modelName 就是要映射的集合名 mongoose会自动将集合名变成复数</span><br><span class="line">var StuModel &#x3D; mongoose.model(&quot;student&quot; , stuSchema);</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;向数据库中插入一个文档</span><br><span class="line">&#x2F;&#x2F;StuModel.create(doc, function(err)&#123;&#125;);</span><br><span class="line">StuModel.create(&#123;</span><br><span class="line">	name:&quot;白骨精&quot;,</span><br><span class="line">	age:16,</span><br><span class="line">	address:&quot;白骨洞&quot;</span><br><span class="line">&#125;,function (err) &#123;</span><br><span class="line">	if(!err)&#123;</span><br><span class="line">		console.log(&quot;插入成功~~~&quot;);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="3-Model"><a href="#3-Model" class="headerlink" title="3. Model"></a>3. Model</h3><p>有了Model，我们就可以来对数据库进行增删改查的操作了</p>
<p>​    Model.create(doc(s), [callback])  用来创建一个或多个文档并添加到数据库中</p>
<p>参数：</p>
<p>​        doc(s) 可以是一个文档对象，也可以是一个文档对象的数组</p>
<p>​        callback 当操作完成以后调用的回调函数</p>
<p>查询的：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Model.find(conditions, [projection], [options], [callback])  查询所有符合条件的文档 总会返回一个数组</span><br><span class="line">Model.findById(id, [projection], [options], [callback])  根据文档的id属性查询文档</span><br><span class="line">Model.findOne([conditions], [projection], [options], [callback])  查询符合条件的第一个文档 总和返回一个具体的文档对象</span><br></pre></td></tr></table></figure>

<p>conditions 查询的条件</p>
<p>projection 投影 需要获取到的字段，两种方式</p>
<ol>
<li>{name:1,_id:0}</li>
<li>“name -_id”</li>
</ol>
<p>options  查询选项（skip limit）</p>
<p>​    skip:3 , limit:1}</p>
<p>callback 回调函数，查询结果会通过回调函数返回</p>
<p>​         回调函数必须传，如果不传回调函数，压根不会查询</p>
<h4 id="使用Model进行增删改查"><a href="#使用Model进行增删改查" class="headerlink" title="使用Model进行增删改查"></a>使用Model进行增删改查</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line">StuModel.find(&#123;<span class="attr">name</span>:<span class="string">&quot;唐僧&quot;</span>&#125;,<span class="function"><span class="keyword">function</span> (<span class="params">err , docs</span>) </span>&#123;</span><br><span class="line">	<span class="function"><span class="title">if</span>(<span class="params">!err</span>)</span>&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(docs);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;);</span><br><span class="line">StuModel.find(&#123;&#125;,&#123;<span class="attr">name</span>:<span class="number">1</span> , <span class="attr">_id</span>:<span class="number">0</span>&#125;,<span class="function"><span class="keyword">function</span> (<span class="params">err , docs</span>) </span>&#123;</span><br><span class="line">	<span class="function"><span class="title">if</span>(<span class="params">!err</span>)</span>&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(docs);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;);</span><br><span class="line">StuModel.find(&#123;&#125;,<span class="string">&quot;name age -_id&quot;</span>, &#123;<span class="attr">skip</span>:<span class="number">3</span> , <span class="attr">limit</span>:<span class="number">1</span>&#125; , <span class="function"><span class="keyword">function</span> (<span class="params">err , docs</span>) </span>&#123;</span><br><span class="line">	<span class="function"><span class="title">if</span>(<span class="params">!err</span>)</span>&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(docs);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">StuModel.findOne(&#123;&#125; , <span class="function"><span class="keyword">function</span> (<span class="params">err , doc</span>) </span>&#123;</span><br><span class="line">	<span class="function"><span class="title">if</span>(<span class="params">!err</span>)</span>&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(doc);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;);</span><br><span class="line">StuModel.findById(<span class="string">&quot;59c4c3cf4e5483191467d392&quot;</span> , <span class="function"><span class="keyword">function</span> (<span class="params">err , doc</span>) </span>&#123;</span><br><span class="line">	<span class="function"><span class="title">if</span>(<span class="params">!err</span>)</span>&#123;</span><br><span class="line">		<span class="comment">//console.log(doc);</span></span><br><span class="line">		<span class="comment">//通过find()查询的结果，返回的对象，就是Document，文档对象</span></span><br><span class="line">		<span class="comment">//Document对象是Model的实例</span></span><br><span class="line">		<span class="built_in">console</span>.log(doc <span class="keyword">instanceof</span> StuModel);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;);StuModel.create([</span><br><span class="line">	&#123;</span><br><span class="line">		name:<span class="string">&quot;沙和尚&quot;</span>,</span><br><span class="line">		age:<span class="number">38</span>,</span><br><span class="line">		gender:<span class="string">&quot;male&quot;</span>,</span><br><span class="line">		address:<span class="string">&quot;流沙河&quot;</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">],<span class="function"><span class="keyword">function</span> (<span class="params">err</span>) </span>&#123;</span><br><span class="line">	<span class="function"><span class="title">if</span>(<span class="params">!err</span>)</span>&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="built_in">arguments</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	修改</span></span><br><span class="line"><span class="comment"> Model.update(conditions, doc, [options], [callback])</span></span><br><span class="line"><span class="comment"> Model.updateMany(conditions, doc, [options], [callback])</span></span><br><span class="line"><span class="comment"> Model.updateOne(conditions, doc, [options], [callback])</span></span><br><span class="line"><span class="comment"> 	- 用来修改一个或多个文档</span></span><br><span class="line"><span class="comment"> 	- 参数：</span></span><br><span class="line"><span class="comment"> 		conditions 查询条件</span></span><br><span class="line"><span class="comment"> 		doc 修改后的对象</span></span><br><span class="line"><span class="comment"> 		options 配置参数</span></span><br><span class="line"><span class="comment"> 		callback 回调函数</span></span><br><span class="line"><span class="comment"> Model.replaceOne(conditions, doc, [options], [callback])</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"></span><br><span class="line">StuModel.updateOne(&#123;<span class="attr">name</span>:<span class="string">&quot;唐僧&quot;</span>&#125;,&#123;<span class="attr">$set</span>:&#123;<span class="attr">age</span>:<span class="number">20</span>&#125;&#125;,<span class="function"><span class="keyword">function</span> (<span class="params">err</span>) </span>&#123;</span><br><span class="line">	<span class="function"><span class="title">if</span>(<span class="params">!err</span>)</span>&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">&quot;修改成功&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">删除：</span></span><br><span class="line"><span class="comment"> Model.remove(conditions, [callback])</span></span><br><span class="line"><span class="comment"> Model.deleteOne(conditions, [callback])</span></span><br><span class="line"><span class="comment"> Model.deleteMany(conditions, [callback])</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">StuModel.remove(&#123;<span class="attr">name</span>:<span class="string">&quot;白骨精&quot;</span>&#125;,<span class="function"><span class="keyword">function</span> (<span class="params">err</span>) </span>&#123;</span><br><span class="line">	<span class="function"><span class="title">if</span>(<span class="params">!err</span>)</span>&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">&quot;删除成功~~&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> Model.count(conditions, [callback])</span><br><span class="line"> 	- 统计文档的数量的</span><br><span class="line"></span><br><span class="line">StuModel.count(&#123;&#125;,<span class="function"><span class="keyword">function</span> (<span class="params">err , count</span>) </span>&#123;</span><br><span class="line">	<span class="function"><span class="title">if</span>(<span class="params">!err</span>)</span>&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(count);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="4-document"><a href="#4-document" class="headerlink" title="4.document"></a>4.document</h3><p>​    Document 和 集合中的文档一一对应 ， Document是Model的实例，通过Model查询到结果都是Document</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> mongoose = <span class="built_in">require</span>(<span class="string">&quot;mongoose&quot;</span>);</span><br><span class="line">mongoose.connect(<span class="string">&quot;mongodb://127.0.0.1/mongoose_test&quot;</span>,&#123;<span class="attr">useMongoClient</span>:<span class="literal">true</span>&#125;);</span><br><span class="line">mongoose.connection.once(<span class="string">&quot;open&quot;</span>,<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">&quot;数据库连接成功~~~&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> Schema = mongoose.Schema;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> stuSchema = <span class="keyword">new</span> Schema(&#123;</span><br><span class="line"></span><br><span class="line">	name:<span class="built_in">String</span>,</span><br><span class="line">	age:<span class="built_in">Number</span>,</span><br><span class="line">	gender:&#123;</span><br><span class="line">		type:<span class="built_in">String</span>,</span><br><span class="line">		<span class="keyword">default</span>:<span class="string">&quot;female&quot;</span></span><br><span class="line">	&#125;,</span><br><span class="line">	address:<span class="built_in">String</span></span><br><span class="line"></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> StuModel = mongoose.model(<span class="string">&quot;student&quot;</span> , stuSchema);</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	Document 和 集合中的文档一一对应 ， Document是Model的实例</span></span><br><span class="line"><span class="comment">		通过Model查询到结果都是Document</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//创建一个Document</span></span><br><span class="line"><span class="keyword">var</span> stu = <span class="keyword">new</span> StuModel(&#123;</span><br><span class="line">	name:<span class="string">&quot;奔波霸&quot;</span>,</span><br><span class="line">	age:<span class="number">48</span>,</span><br><span class="line">	gender:<span class="string">&quot;male&quot;</span>,</span><br><span class="line">	address:<span class="string">&quot;碧波潭&quot;</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	document的方法</span></span><br><span class="line"><span class="comment"> 		Model#save([options], [fn])</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">stu.save(function (err) &#123;</span></span><br><span class="line"><span class="comment">	if(!err)&#123;</span></span><br><span class="line"><span class="comment">		console.log(&quot;保存成功~~~&quot;);</span></span><br><span class="line"><span class="comment">	&#125;</span></span><br><span class="line"><span class="comment">&#125;);*/</span></span><br><span class="line"></span><br><span class="line">StuModel.findOne(&#123;&#125;,<span class="function"><span class="keyword">function</span> (<span class="params">err , doc</span>) </span>&#123;</span><br><span class="line">	<span class="function"><span class="title">if</span>(<span class="params">!err</span>)</span>&#123;</span><br><span class="line">		<span class="comment">/*</span></span><br><span class="line"><span class="comment">		 	update(update,[options],[callback])</span></span><br><span class="line"><span class="comment">		 		- 修改对象</span></span><br><span class="line"><span class="comment">		 	remove([callback])</span></span><br><span class="line"><span class="comment">		 		- 删除对象</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">		 */</span></span><br><span class="line">		<span class="comment">//console.log(doc);</span></span><br><span class="line">		<span class="comment">/*doc.update(&#123;$set:&#123;age:28&#125;&#125;,function (err) &#123;</span></span><br><span class="line"><span class="comment">			if(!err)&#123;</span></span><br><span class="line"><span class="comment">				console.log(&quot;修改成功~~~&quot;);</span></span><br><span class="line"><span class="comment">			&#125;</span></span><br><span class="line"><span class="comment">		&#125;);*/</span></span><br><span class="line"></span><br><span class="line">		<span class="comment">/*doc.age = 18;</span></span><br><span class="line"><span class="comment">		doc.save();*/</span></span><br><span class="line"></span><br><span class="line">		<span class="comment">/*doc.remove(function (err) &#123;</span></span><br><span class="line"><span class="comment">			if(!err)&#123;</span></span><br><span class="line"><span class="comment">				console.log(&quot;大师兄再见~~~&quot;);</span></span><br><span class="line"><span class="comment">			&#125;</span></span><br><span class="line"><span class="comment">		&#125;);*/</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">		<span class="comment">/*</span></span><br><span class="line"><span class="comment">			get(name)</span></span><br><span class="line"><span class="comment">				- 获取文档中的指定属性值</span></span><br><span class="line"><span class="comment">			set(name , value)</span></span><br><span class="line"><span class="comment">				- 设置文档的指定的属性值</span></span><br><span class="line"><span class="comment">			id</span></span><br><span class="line"><span class="comment">				- 获取文档的_id属性值</span></span><br><span class="line"><span class="comment">			 toJSON() ******</span></span><br><span class="line"><span class="comment">			 	- 转换为一个JSON对象</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">			 toObject()</span></span><br><span class="line"><span class="comment">			 	- 将Document对象转换为一个普通的JS对象</span></span><br><span class="line"><span class="comment">			 		转换为普通的js对象以后，注意所有的Document对象的方法或属性都不能使用了</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">		 */</span></span><br><span class="line">		<span class="comment">//console.log(doc.get(&quot;age&quot;));</span></span><br><span class="line">		<span class="comment">//console.log(doc.age);</span></span><br><span class="line"></span><br><span class="line">		<span class="comment">//doc.set(&quot;name&quot;,&quot;猪小小&quot;);</span></span><br><span class="line">		<span class="comment">//doc.name = &quot;hahaha&quot;;</span></span><br><span class="line"></span><br><span class="line">		<span class="comment">//console.log(doc._id);</span></span><br><span class="line">		<span class="comment">//var j = doc.toJSON();</span></span><br><span class="line">		<span class="comment">//console.log(j);</span></span><br><span class="line"></span><br><span class="line">		<span class="comment">//var o = doc.toObject();</span></span><br><span class="line"></span><br><span class="line">		<span class="comment">//console.log(o);</span></span><br><span class="line"></span><br><span class="line">		doc = doc.toObject();</span><br><span class="line"></span><br><span class="line">		<span class="keyword">delete</span> doc.address;</span><br><span class="line"></span><br><span class="line">		<span class="built_in">console</span>.log(doc._id);</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2019/01/16/DataBase/MangoDB%20%E5%85%A5%E9%97%A8/" data-id="cmblme371001qlppvasfzawjq" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/DB-MangoDB/" rel="tag">DB MangoDB</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/3/">&amp;laquo; Prev</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/page/5/">5</a><a class="page-number" href="/page/6/">6</a><span class="space">&hellip;</span><a class="page-number" href="/page/23/">23</a><a class="extend next" rel="next" href="/page/5/">Next &amp;raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Atom/">-Atom</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/JAVA/">-JAVA</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Java/">-Java</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Java-%E8%99%9A%E6%8B%9F%E6%9C%BA/">-Java -虚拟机</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Java-Web/">-Java Web</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/JavaWeb/">-JavaWeb</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/LeetCode/">-LeetCode</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/">-Linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Mac/">-Mac</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/MacOS/">-MacOS</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/PHP/">-PHP</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/SpringBoot/">-SpringBoot</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/leetcode/">-leetcode</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%85%B6%E4%BB%96/">-其他</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%B0%8F%E8%AE%B0/">-小记</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%B7%A5%E5%85%B7%E7%B1%BB/">-工具类</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/">-开发工具</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/">-数据库</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/">-数据结构</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/">-数据结构与算法</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%9D%82%E6%96%87/">-杂文</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%9D%82%E8%AE%B0/">-杂记</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%94%9F%E6%B4%BB/">-生活</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%AE%97%E6%B3%95%E8%AE%BE%E8%AE%A1/">-算法设计</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/">-计算机网络</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Docker/">Docker</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/FrontEnd/">FrontEnd</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/JAVA/">JAVA</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/JAVA/Java%E5%B7%A5%E5%85%B7%E5%8C%85/">Java工具包</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/JAVA/LOG/">LOG</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/JDK-%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/">JDK 源码分析</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Java/">Java</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Kafka-%E6%8E%A2%E9%99%A9/">Kafka 探险</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/LeetCode/">LeetCode</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/">Linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/MyBatis/">MyBatis</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Mybatis/">Mybatis</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Netty/">Netty</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Netty-%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/">Netty 源码分析</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/PHP/">PHP</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/PT%E7%AB%99/">PT站</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Shiro/">Shiro</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spark/">Spark</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring-Fu/">Spring Fu</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring-%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/">Spring 源码分析</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Spring-%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/Spring/">Spring</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/SpringBoot/">SpringBoot</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/SpringCloud/">SpringCloud</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/SpringFu/">SpringFu</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/SpringFu/Spring/">Spring</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/SpringMVC/">SpringMVC</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Tomcat/">Tomcat</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Web/">Web</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/git/">git</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%B7%A5%E5%85%B7/">工具</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%B7%A5%E5%85%B7%E9%9B%86/">工具集</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/">开发工具</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%96%87%E7%AB%A0/">文章</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%9C%8D%E5%8A%A1%E5%99%A8/">服务器</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%9C%8D%E5%8A%A1%E5%99%A8/Linux/">Linux</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%9D%82%E8%AE%B0/">杂记</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%94%9F%E6%B4%BB/">生活</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%94%9F%E6%B4%BB/%E9%98%BF%E9%87%8C%E5%B7%B4%E5%B7%B4/">阿里巴巴</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%94%9F%E6%B4%BB/%E9%98%BF%E9%87%8C%E5%B7%B4%E5%B7%B4/%E5%BC%80%E5%BF%83/">开心</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%94%9F%E6%B4%BB%E5%B0%8F%E8%AE%B0/">生活小记</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%94%9F%E6%B4%BB%E6%84%9F%E6%82%9F/">生活感悟</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%A7%86%E9%A2%91%E5%90%8E%E6%9C%9F/">视频后期</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/">设计模式</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/MacOS/" rel="tag">-MacOS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CSS/" rel="tag">CSS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DB-MangoDB/" rel="tag">DB MangoDB</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Docker/" rel="tag">Docker</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Filter/" rel="tag">Filter</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Hibernate/" rel="tag">Hibernate</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/IO/" rel="tag">IO</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JAVA/" rel="tag">JAVA</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JDBC/" rel="tag">JDBC</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JDK-%E6%BA%90%E7%A0%81/" rel="tag">JDK 源码</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JDK-%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/" rel="tag">JDK 源码分析</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JVM-Java-%E8%99%9A%E6%8B%9F%E6%9C%BA/" rel="tag">JVM Java 虚拟机</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java/" rel="tag">Java</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java-Web/" rel="tag">Java Web</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java-%E5%B7%A5%E5%85%B7%E5%8C%85/" rel="tag">Java 工具包</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java-%E8%99%9A%E6%8B%9F%E6%9C%BA/" rel="tag">Java 虚拟机</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java8/" rel="tag">Java8</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JavaScript/" rel="tag">JavaScript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JavaWeb/" rel="tag">JavaWeb</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java%E5%AD%A6%E4%B9%A0/" rel="tag">Java学习</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java%E5%B7%A5%E5%85%B7/" rel="tag">Java工具</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Kafka-%E6%8E%A2%E9%99%A9/" rel="tag">Kafka 探险</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/LeetCode/" rel="tag">LeetCode</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux/" rel="tag">Linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Mac/" rel="tag">Mac</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MyBatis/" rel="tag">MyBatis</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Mybatis/" rel="tag">Mybatis</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/PHP-%E5%8C%85%E7%AE%A1%E7%90%86%E5%99%A8/" rel="tag">PHP,包管理器</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/PHP-%E5%BE%AE%E4%BF%A1/" rel="tag">PHP,微信</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/React/" rel="tag">React</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Redis-NoSql-%E6%95%B0%E6%8D%AE%E5%BA%93/" rel="tag">Redis NoSql 数据库</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Shiro/" rel="tag">Shiro</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Spark/" rel="tag">Spark</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Sping/" rel="tag">Sping</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Spring/" rel="tag">Spring</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Spring-%E6%BA%90%E7%A0%81/" rel="tag">Spring 源码</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SpringBoot/" rel="tag">SpringBoot</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SpringCloud/" rel="tag">SpringCloud</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SpringFu/" rel="tag">SpringFu</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SpringMVC/" rel="tag">SpringMVC</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Struts2/" rel="tag">Struts2</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Vim/" rel="tag">Vim</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Web/" rel="tag">Web</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Webpack/" rel="tag">Webpack</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/" rel="tag">git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/java/" rel="tag">java</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/log/" rel="tag">log</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/oh-my-zsh/" rel="tag">oh-my-zsh</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/shadowsocks/" rel="tag">shadowsocks</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/struts2/" rel="tag">struts2</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%B8%BB%E9%A2%98/" rel="tag">主题</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%BA%8C%E5%8F%89%E6%A0%91/" rel="tag">二叉树</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/" rel="tag">动态规划</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%A4%9A%E7%BA%BF%E7%A8%8B/" rel="tag">多线程</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%B7%A5%E5%85%B7/" rel="tag">工具</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%B7%A5%E5%85%B7-WebStrom-JetBrains/" rel="tag">工具 WebStrom JetBrains</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/" rel="tag">开发工具</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%BC%80%E5%BF%83/" rel="tag">开心</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%8E%92%E5%BA%8F/" rel="tag">排序</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E5%AD%97%E5%9B%BE%E5%83%8F/" rel="tag">数字图像</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" rel="tag">数据库</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" rel="tag">数据结构</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%96%87%E7%AB%A0/" rel="tag">文章</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%9D%82%E6%96%87/" rel="tag">杂文</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%9D%82%E8%AE%B0/" rel="tag">杂记</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%BA%90%E7%A0%81/" rel="tag">源码</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/" rel="tag">源码分析</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%94%9F%E6%B4%BB/" rel="tag">生活</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%94%9F%E6%B4%BB%E6%84%9F%E6%82%9F/" rel="tag">生活感悟</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%99%BE%E9%98%BF/" rel="tag">百阿</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%AE%97%E6%B3%95/" rel="tag">算法</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%AE%97%E6%B3%95%E8%AE%BE%E8%AE%A1/" rel="tag">算法设计</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BB%88%E7%AB%AF/" rel="tag">终端</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%8C%83%E5%9E%8B/" rel="tag">范型</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%A7%86%E9%A2%91%E5%90%8E%E6%9C%9F/" rel="tag">视频后期</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E6%A8%A1%E6%9D%BF%E6%96%B9%E6%B3%95/" rel="tag">设计模式,模板方法</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E7%AD%96%E7%95%A5%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" rel="tag">设计模式,策略设计模式</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E7%BB%84%E5%90%88%E6%A8%A1%E5%BC%8F/" rel="tag">设计模式,组合模式</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E8%A3%85%E9%A5%B0%E8%80%85/" rel="tag">设计模式,装饰者</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E8%A7%82%E5%AF%9F%E8%80%85/" rel="tag">设计模式,观察者</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E8%B4%A3%E4%BB%BB%E9%93%BE/" rel="tag">设计模式,责任链</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E9%80%82%E9%85%8D%E5%99%A8/" rel="tag">设计模式,适配器</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%93%BE%E8%A1%A8/" rel="tag">链表</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%98%BF%E9%87%8C/" rel="tag">阿里</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6/" rel="tag">集合框架</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/" rel="tag">面向对象</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/MacOS/" style="font-size: 10px;">-MacOS</a> <a href="/tags/CSS/" style="font-size: 12px;">CSS</a> <a href="/tags/DB-MangoDB/" style="font-size: 10px;">DB MangoDB</a> <a href="/tags/Docker/" style="font-size: 10px;">Docker</a> <a href="/tags/Filter/" style="font-size: 10px;">Filter</a> <a href="/tags/Hibernate/" style="font-size: 12px;">Hibernate</a> <a href="/tags/IO/" style="font-size: 10px;">IO</a> <a href="/tags/JAVA/" style="font-size: 10px;">JAVA</a> <a href="/tags/JDBC/" style="font-size: 10px;">JDBC</a> <a href="/tags/JDK-%E6%BA%90%E7%A0%81/" style="font-size: 10px;">JDK 源码</a> <a href="/tags/JDK-%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/" style="font-size: 19px;">JDK 源码分析</a> <a href="/tags/JVM-Java-%E8%99%9A%E6%8B%9F%E6%9C%BA/" style="font-size: 10px;">JVM Java 虚拟机</a> <a href="/tags/Java/" style="font-size: 18px;">Java</a> <a href="/tags/Java-Web/" style="font-size: 10px;">Java Web</a> <a href="/tags/Java-%E5%B7%A5%E5%85%B7%E5%8C%85/" style="font-size: 10px;">Java 工具包</a> <a href="/tags/Java-%E8%99%9A%E6%8B%9F%E6%9C%BA/" style="font-size: 11px;">Java 虚拟机</a> <a href="/tags/Java8/" style="font-size: 14px;">Java8</a> <a href="/tags/JavaScript/" style="font-size: 12px;">JavaScript</a> <a href="/tags/JavaWeb/" style="font-size: 10px;">JavaWeb</a> <a href="/tags/Java%E5%AD%A6%E4%B9%A0/" style="font-size: 10px;">Java学习</a> <a href="/tags/Java%E5%B7%A5%E5%85%B7/" style="font-size: 10px;">Java工具</a> <a href="/tags/Kafka-%E6%8E%A2%E9%99%A9/" style="font-size: 12px;">Kafka 探险</a> <a href="/tags/LeetCode/" style="font-size: 17px;">LeetCode</a> <a href="/tags/Linux/" style="font-size: 11px;">Linux</a> <a href="/tags/Mac/" style="font-size: 10px;">Mac</a> <a href="/tags/MyBatis/" style="font-size: 15px;">MyBatis</a> <a href="/tags/Mybatis/" style="font-size: 10px;">Mybatis</a> <a href="/tags/PHP-%E5%8C%85%E7%AE%A1%E7%90%86%E5%99%A8/" style="font-size: 10px;">PHP,包管理器</a> <a href="/tags/PHP-%E5%BE%AE%E4%BF%A1/" style="font-size: 10px;">PHP,微信</a> <a href="/tags/React/" style="font-size: 10px;">React</a> <a href="/tags/Redis-NoSql-%E6%95%B0%E6%8D%AE%E5%BA%93/" style="font-size: 10px;">Redis NoSql 数据库</a> <a href="/tags/Shiro/" style="font-size: 10px;">Shiro</a> <a href="/tags/Spark/" style="font-size: 14px;">Spark</a> <a href="/tags/Sping/" style="font-size: 10px;">Sping</a> <a href="/tags/Spring/" style="font-size: 17px;">Spring</a> <a href="/tags/Spring-%E6%BA%90%E7%A0%81/" style="font-size: 12px;">Spring 源码</a> <a href="/tags/SpringBoot/" style="font-size: 20px;">SpringBoot</a> <a href="/tags/SpringCloud/" style="font-size: 12px;">SpringCloud</a> <a href="/tags/SpringFu/" style="font-size: 11px;">SpringFu</a> <a href="/tags/SpringMVC/" style="font-size: 12px;">SpringMVC</a> <a href="/tags/Struts2/" style="font-size: 10px;">Struts2</a> <a href="/tags/Vim/" style="font-size: 10px;">Vim</a> <a href="/tags/Web/" style="font-size: 10px;">Web</a> <a href="/tags/Webpack/" style="font-size: 10px;">Webpack</a> <a href="/tags/git/" style="font-size: 10px;">git</a> <a href="/tags/java/" style="font-size: 10px;">java</a> <a href="/tags/log/" style="font-size: 10px;">log</a> <a href="/tags/oh-my-zsh/" style="font-size: 10px;">oh-my-zsh</a> <a href="/tags/shadowsocks/" style="font-size: 10px;">shadowsocks</a> <a href="/tags/struts2/" style="font-size: 11px;">struts2</a> <a href="/tags/%E4%B8%BB%E9%A2%98/" style="font-size: 10px;">主题</a> <a href="/tags/%E4%BA%8C%E5%8F%89%E6%A0%91/" style="font-size: 11px;">二叉树</a> <a href="/tags/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/" style="font-size: 14px;">动态规划</a> <a href="/tags/%E5%A4%9A%E7%BA%BF%E7%A8%8B/" style="font-size: 11px;">多线程</a> <a href="/tags/%E5%B7%A5%E5%85%B7/" style="font-size: 12px;">工具</a> <a href="/tags/%E5%B7%A5%E5%85%B7-WebStrom-JetBrains/" style="font-size: 10px;">工具 WebStrom JetBrains</a> <a href="/tags/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/" style="font-size: 10px;">开发工具</a> <a href="/tags/%E5%BC%80%E5%BF%83/" style="font-size: 11px;">开心</a> <a href="/tags/%E6%8E%92%E5%BA%8F/" style="font-size: 11px;">排序</a> <a href="/tags/%E6%95%B0%E5%AD%97%E5%9B%BE%E5%83%8F/" style="font-size: 10px;">数字图像</a> <a href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" style="font-size: 15px;">数据库</a> <a href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" style="font-size: 16px;">数据结构</a> <a href="/tags/%E6%96%87%E7%AB%A0/" style="font-size: 10px;">文章</a> <a href="/tags/%E6%9D%82%E6%96%87/" style="font-size: 11px;">杂文</a> <a href="/tags/%E6%9D%82%E8%AE%B0/" style="font-size: 13px;">杂记</a> <a href="/tags/%E6%BA%90%E7%A0%81/" style="font-size: 14px;">源码</a> <a href="/tags/%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/" style="font-size: 10px;">源码分析</a> <a href="/tags/%E7%94%9F%E6%B4%BB/" style="font-size: 18px;">生活</a> <a href="/tags/%E7%94%9F%E6%B4%BB%E6%84%9F%E6%82%9F/" style="font-size: 11px;">生活感悟</a> <a href="/tags/%E7%99%BE%E9%98%BF/" style="font-size: 11px;">百阿</a> <a href="/tags/%E7%AE%97%E6%B3%95/" style="font-size: 10px;">算法</a> <a href="/tags/%E7%AE%97%E6%B3%95%E8%AE%BE%E8%AE%A1/" style="font-size: 13px;">算法设计</a> <a href="/tags/%E7%BB%88%E7%AB%AF/" style="font-size: 10px;">终端</a> <a href="/tags/%E8%8C%83%E5%9E%8B/" style="font-size: 10px;">范型</a> <a href="/tags/%E8%A7%86%E9%A2%91%E5%90%8E%E6%9C%9F/" style="font-size: 12px;">视频后期</a> <a href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E6%A8%A1%E6%9D%BF%E6%96%B9%E6%B3%95/" style="font-size: 10px;">设计模式,模板方法</a> <a href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E7%AD%96%E7%95%A5%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" style="font-size: 10px;">设计模式,策略设计模式</a> <a href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E7%BB%84%E5%90%88%E6%A8%A1%E5%BC%8F/" style="font-size: 10px;">设计模式,组合模式</a> <a href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E8%A3%85%E9%A5%B0%E8%80%85/" style="font-size: 10px;">设计模式,装饰者</a> <a href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E8%A7%82%E5%AF%9F%E8%80%85/" style="font-size: 10px;">设计模式,观察者</a> <a href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E8%B4%A3%E4%BB%BB%E9%93%BE/" style="font-size: 10px;">设计模式,责任链</a> <a href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E9%80%82%E9%85%8D%E5%99%A8/" style="font-size: 10px;">设计模式,适配器</a> <a href="/tags/%E9%93%BE%E8%A1%A8/" style="font-size: 11px;">链表</a> <a href="/tags/%E9%98%BF%E9%87%8C/" style="font-size: 11px;">阿里</a> <a href="/tags/%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6/" style="font-size: 11px;">集合框架</a> <a href="/tags/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/" style="font-size: 11px;">面向对象</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/06/">June 2025</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/07/">July 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/06/">June 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/05/">May 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/01/">January 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">March 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">February 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">January 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">September 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">June 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">May 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">June 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">April 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">March 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">December 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">October 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">September 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">August 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">July 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">June 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">May 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">April 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">March 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">February 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/10/">October 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/04/">April 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/03/">March 2016</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2025/06/07/Java%20SE/Guava%20Cache%20%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90%E4%B8%8E%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/">(no title)</a>
          </li>
        
          <li>
            <a href="/2021/07/11/Spring/SpringFu%20DSL%20%E8%AE%BE%E8%AE%A1%E6%80%9D%E6%83%B3/">SpringFu DSL 设计思想</a>
          </li>
        
          <li>
            <a href="/2021/07/11/Spring/SpringFu%20%E5%90%AF%E5%8A%A8%E6%B5%81%E7%A8%8B/">SpringFu 启动流程</a>
          </li>
        
          <li>
            <a href="/2021/07/10/Spring/%E7%94%A8%E5%87%BD%E6%95%B0%E5%86%99%20Spring%20%E9%A1%B9%E7%9B%AE%E4%BD%A0%E8%A7%81%E8%BF%87%E4%B9%88%20--SpringFu/">用函数写 Bean 你见过么</a>
          </li>
        
          <li>
            <a href="/2021/06/27/Tomcat/%E6%8F%AD%E7%A7%98%20Tomcat%EF%BC%88%E4%B8%80%EF%BC%89%20-%20%E5%90%AF%E5%8A%A8/">揭秘 Tomcat - 启动</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2025 John Doe<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>




  </div>
</body>
</html>